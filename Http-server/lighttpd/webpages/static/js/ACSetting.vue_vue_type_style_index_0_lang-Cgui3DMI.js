var h=(D,g,p)=>new Promise((a,d)=>{var P=l=>{try{r(p.next(l))}catch(C){d(C)}},R=l=>{try{r(p.throw(l))}catch(C){d(C)}},r=l=>l.done?a(l.value):Promise.resolve(l.value).then(P,R);r((p=p.apply(D,g)).next())});import{A as V}from"./ac-Dv1xUiln.js";import{d as q,j as B,r as w,x as U,l as $,G as j,a as c,o as v,m as T,w as i,f as n,c as y,n as z,u as H,F as G,e as K,t as J,aS as Q,aN as b}from"./index-B378b16y.js";const S={AirCoolPoint:{min:10,max:50},AirCoolPointDiff:{min:1,max:10},AirHeatPoint:{min:-15,max:30},AirHeatReturnDiff:{min:1,max:10},AirRHDiffPoint:{min:0,max:100},AirRHPointDiffReturn:{min:0,max:100},AirhighTempPoint:{min:25,max:80},AirLowTempPoint:{min:-20,max:15},AirHighRHPoint:{min:0,max:100},CellTemperature:{min:-99,max:99},CellCoolPoint:{min:10,max:50},CellCoolPointDiff:{min:1,max:10},CellHeatPoint:{min:-15,max:30},CellHeatReturnDiff:{min:1,max:10}},k=["AirCoolPoint","AirCoolPointDiff","AirHeatPoint","AirHeatReturnDiff","AirRHDiffPoint","AirRHPointDiffReturn","AirhighTempPoint","AirLowTempPoint","AirHighRHPoint","CellCoolPoint","CellCoolPointDiff","CellHeatPoint","CellHeatReturnDiff"],W={key:0},X={key:1},te=q({name:"ACSettings",__name:"ACSetting",props:{modelValue:{type:Boolean,default:!1},slave:{default:1}},emits:["update:modelValue"],setup(D,{emit:g}){const{locale:p,t:a}=B(),d=w(),P=D,R=g,r=U({get:()=>P.modelValue,set:e=>R("update:modelValue",e)}),l=()=>h(this,null,function*(){try{const e=yield V.requestAcDetail(P.slave);if((e==null?void 0:e.code)==200){for(const o in t.value)t.value[o]=e.data[o];e.data.AirAllRunState!=0&&(t.value.isOn=!0)}}catch(e){console.warn("--[ac detail] requestAcDetail error=",e==null?void 0:e.message)}});$(r,(e,o)=>{e==!0&&l()});const C=e=>e(),t=w({AirCoolPoint:29,AirCoolPointDiff:3,AirHeatPoint:15,AirHeatReturnDiff:3,AirRHDiffPoint:85,AirRHPointDiffReturn:5,AirhighTempPoint:40,AirLowTempPoint:10,AirHighRHPoint:70,CellTemperature:0,CellCoolPoint:0,CellCoolPointDiff:0,CellHeatPoint:0,CellHeatReturnDiff:0,OperatingMode:0}),x=w({});function N(e,o,f,s,A){const m=Number(o);isNaN(m)||m<s||m>A?f(new Error(a("ac.validator.invalidInput",{min:s,max:A}))):f()}const I=()=>{for(const e of k)x.value[e]=[{required:!0,message:a("ac.validator.emptyNotAllowed"),trigger:"blur"},{validator:(o,f,s)=>N(o,f,s,S[e].min,S[e].max),trigger:"blur"}]},L=e=>{e.validate(o=>{o&&E()})},E=()=>h(this,null,function*(){const e={Slave:P.slave,CoolPoint:t.value.AirCoolPoint,CoolPointDiff:t.value.AirCoolPointDiff,HeatPoint:t.value.AirHeatPoint,HeatPointDiff:t.value.AirHeatReturnDiff,DryPoint:t.value.AirRHDiffPoint,DryPointDiff:t.value.AirRHPointDiffReturn,HighTempPoint:t.value.AirhighTempPoint,LowTempPoint:t.value.AirLowTempPoint,HighHumiPoint:t.value.AirHighRHPoint,OperatingMode:t.value.OperatingMode,CellTemperature:t.value.CellTemperature,CellCoolPoint:t.value.CellCoolPoint,CellCoolPointDiff:t.value.CellCoolPointDiff,CellHeatPoint:t.value.CellHeatPoint,CellHeatReturnDiff:t.value.CellHeatReturnDiff};try{const{code:o}=yield V.setACParam(e);if(o==200)b(a("ac.administrator.operationSuccess"),{type:"success"});else throw new Error("Server Error")}catch(o){b(a("ac.administrator.operationFail"),{type:"error"})}});return j(()=>{I()}),(e,o)=>{const f=c("el-input"),s=c("el-form-item"),A=c("el-col"),m=c("el-row"),F=c("el-button"),M=c("el-form");return v(),T(H(Q),{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=u=>r.value=u),class:"ac-settings-container",size:"79.06%","show-close":!0,"append-to-body":!0,"with-header":!0,title:H(a)("ac.administrator.acControl"),direction:"rtl","before-close":C},{default:i(()=>[n(M,{ref_key:"acSettingFormRef",ref:d,model:t.value,rules:x.value,"label-position":"top"},{default:i(()=>[n(m,null,{default:i(()=>[(v(!0),y(G,null,z(H(k),(u,_)=>(v(),T(A,{key:_,span:6},{default:i(()=>[n(s,{label:H(a)("ac."+u),prop:u},{default:i(()=>[n(f,{modelValue:t.value[u],"onUpdate:modelValue":O=>t.value[u]=O,modelModifiers:{number:!0},class:"paramInput"},{suffix:i(()=>[_==4||_==5||_==8?(v(),y("span",W,"%")):(v(),y("span",X,"â„ƒ"))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"])]),_:2},1024))),128))]),_:1}),n(m,null,{default:i(()=>[n(A,{span:6},{default:i(()=>[n(s,null,{default:i(()=>[n(F,{type:"primary",onClick:o[0]||(o[0]=u=>L(d.value))},{default:i(()=>[K(J(H(a)("buttons.hssave")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{te as _};
