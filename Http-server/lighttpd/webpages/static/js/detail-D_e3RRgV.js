var H=(f,a,m)=>new Promise((p,b)=>{var S=u=>{try{l(m.next(u))}catch(A){b(A)}},g=u=>{try{l(m.throw(u))}catch(A){b(A)}},l=u=>u.done?p(u.value):Promise.resolve(u.value).then(S,g);l((m=m.apply(f,a)).next())});import{I as n}from"./index-CGgGq9hQ.js";import{d as z,j as M,i as N,v as W,r as I,x as P,q,a as T,o as r,c as _,f as t,w as y,m as h,A as D,u as e,y as w,b as i,t as R,z as U,F as $,n as J,s as j,B as K,C as G,_ as Q}from"./index-B378b16y.js";import{B as X}from"./index-TOYUMokL.js";import{g as Y,A as Z}from"./ac-Dv1xUiln.js";import{u as ee}from"./useTimer-u5e-KjxW.js";import{I as le}from"./icon-warn-B2hpFNpD.js";import{I as ae}from"./icon-error-D8b2vw6T.js";import{I as d}from"./icontype-CrdMeA1p.js";import{v as o}from"./valueUtil-BReNmlgC.js";import{I as te}from"./icon-settings-B7co2eUu.js";import{_ as ne}from"./ACSetting.vue_vue_type_style_index_0_lang-Cgui3DMI.js";import{r as k}from"./acDetailUtil-CbgTn_eX.js";import"./index-CbvsTRMa.js";import"./cluster-DKWQwuWS.js";import"./WarningsUtil-CTO3mp7U.js";import"./pack-rCzq7zF4.js";import"./meter-nf4_0FAI.js";import"./icon-power-off-DaFr1WKX.js";import"./comInterrupt-0m6mzMWM.js";const V=f=>(K("data-v-d77a4cbf"),f=f(),G(),f),ie={class:"detail-container"},oe={class:"detail-content flex"},se={class:"detail-content-left"},ue={class:"detail-content-left-status"},re={class:"detail-content-left-collapse"},ce={name:"1"},ve={class:"el-collapse-item__header"},de={class:"detail-content-left-collapse-content"},me={class:"detail-content-left-collapse-content-item"},pe={class:"detail-content-left-collapse"},fe={name:"1"},be={class:"el-collapse-item__header"},ge={class:"detail-content-left-collapse-content"},Ae={class:"detail-content-left-collapse-content-item"},_e={class:"detail-content-left-collapse-content-item"},he={class:"detail-content-left-collapse-content-item"},Se={class:"detail-content-left-collapse-content-item"},xe={class:"detail-content-left-collapse-content"},Ce={class:"detail-content-left-collapse-content-item"},Ie={class:"detail-content-left-collapse-content-item"},ye={class:"detail-content-left-collapse-content-item"},Re={class:"detail-content-left-collapse-content-item"},we={class:"detail-content-left-collapse-content-item"},He={class:"detail-content-right-message"},Pe={class:"detail-content-right-message-panel"},Te={class:"detail-content-right-message-panel-warning-title"},De=V(()=>i("span",null,"(",-1)),ke=V(()=>i("span",null,")",-1)),Ve={key:0,class:"detail-content-right-message-panel-warning-empty"},Fe={class:"detail-content-right-message-panel-warning-scroll-container"},Oe=z({name:"AcDetail",__name:"detail",setup(f){const{t:a}=M(),m=N(),p=W(),b=I("2"),S=P(()=>{var s;return(s=q())==null?void 0:s.isAdmin()}),g=I(0),l=I({}),u=P(()=>Y(l.value)),A=()=>H(this,null,function*(){try{const s=yield Z.requestAcDetail(parseInt(p.params.id));(s==null?void 0:s.code)==200?JSON.stringify(s.data)!=JSON.stringify(l.value)&&(l.value=s.data,g.value=l.value.AirAllRunState):console.warn("--[ac] requestAcDetail invalid code",s==null?void 0:s.code)}catch(s){console.warn("--[ac detail] requestAcDetail error=",s==null?void 0:s.message)}});ee(()=>A(),{immediate:!0,immediateCallback:!0});const x=I(!1),C=s=>"ac."+(s==0?"stop":"on"),F={label:parseInt(p.params.id),value:parseInt(p.params.id)},O=({ac:s})=>{s!=p.params.id&&m.push("/deviceControl/ac/"+s)};return(s,v)=>{const E=T("el-collapse-item"),B=T("el-collapse");return r(),_("div",ie,[t(X,{"default-ac":F,"default-stack":!1,"default-cluster":!1,"default-pack":!1,"default-meter":!1,onOnChange:O,onOnBackClicked:v[1]||(v[1]=c=>e(m).push("/deviceControl/ac"))},{default:y(()=>[S.value?(r(),_("div",{key:0,class:"top-icon",onClick:v[0]||(v[0]=c=>x.value=!x.value)},[(r(),h(D(e(te))))])):w("",!0)]),_:1}),i("div",oe,[i("div",se,[i("div",ue,[t(n,{class:"flex-[75] w-0",label:e(a)("common.faultStatus"),value:e(a)("common."+(l.value.AirFaultLevel==0?"normal":l.value.AirFaultLevel===1?"warning":"fault")),iconType:l.value.AirFaultLevel==0?e(d).noFault:l.value.AirFaultLevel===1?e(d).warning:e(d).fault},null,8,["label","value","iconType"]),t(n,{class:"flex-[75] w-0",label:e(a)("common.workStatus"),value:e(a)("ac."+e(k)[g.value].key),"icon-type":e(k)[g.value].icon},null,8,["label","value","icon-type"]),t(n,{class:"flex-[128] w-0",label:e(a)("common.comStatus"),value:l.value.TimeoutFlag===1?e(a)("common.comNormal"):e(a)("common.comInterrupt"),iconType:l.value.TimeoutFlag===1?e(d).comNormal:e(d).comInterrupt},null,8,["label","value","iconType"])]),i("div",re,[i("div",ce,[i("div",ve,[t(n,{label:e(a)("home.airConditionerData"),"label-style":{fontWeight:600,fontSize:"14px",color:"#333333"},value:"","enable-row":!0,"icon-type":e(d).systemTempDifference},null,8,["label","icon-type"])]),i("div",de,[i("div",me,[t(n,{class:"flex-1",label:e(a)("ac.AirOutTemp1"),value:e(o).roundString(l.value.AirOutTemp1,2),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirInterTemp1"),value:e(o).roundString(l.value.AirInterTemp1,2),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirInterRh1"),value:e(o).roundString(l.value.AirInterRh1,0)+"%",unit:l.value.AirInterRh1===void 0?"":"RH"},null,8,["label","value","unit"])])])])]),i("div",pe,[i("div",fe,[i("div",be,[t(n,{label:e(a)("home.airConditionerParameters"),"label-style":{fontWeight:600,fontSize:"14px",color:"#333333"},value:"","enable-row":!0,"icon-type":e(d).acParameters},null,8,["label","icon-type"])]),i("div",ge,[i("div",Ae,[t(n,{class:"flex-1",label:e(a)("ac.AirCoolPoint"),value:e(o).roundString(l.value.AirCoolPoint,0),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirCoolPointDiff"),value:e(o).roundString(l.value.AirCoolPointDiff,0),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirHeatPoint"),value:e(o).roundString(l.value.AirHeatPoint,0),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirHeatReturnDiff"),value:e(o).roundString(l.value.AirHeatReturnDiff,0),unit:"℃"},null,8,["label","value"])]),i("div",_e,[t(n,{class:"flex-1",label:e(a)("ac.AirRHDiffPoint"),value:e(o).roundString(l.value.AirRHDiffPoint,0)+"%",unit:l.value.AirRHDiffPoint===void 0?"":"RH"},null,8,["label","value","unit"]),t(n,{class:"flex-1",label:e(a)("ac.AirRHPointDiffReturn"),value:e(o).roundString(l.value.AirRHPointDiffReturn,0)+"%",unit:l.value.AirRHPointDiffReturn===void 0?"":"RH"},null,8,["label","value","unit"]),t(n,{class:"flex-1",label:e(a)("ac.AirLowTempPoint"),value:e(o).roundString(l.value.AirLowTempPoint,0),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirhighTempPoint"),value:e(o).roundString(l.value.AirhighTempPoint,0),unit:"℃"},null,8,["label","value"])]),i("div",he,[t(n,{class:"flex-1",label:e(a)("ac.AirHighRHPoint"),value:e(o).roundString(l.value.AirHighRHPoint,0)+"%",unit:l.value.AirHighRHPoint===void 0?"":"RH"},null,8,["label","value","unit"]),l.value.OperatingMode!=null?(r(),h(n,{key:0,class:"flex-1",label:e(a)("ac.OperatingMode"),value:e(a)("ac."+(l.value.OperatingMode==0?"AcMode":"CellMode"))},null,8,["label","value"])):(r(),h(n,{key:1,class:"flex-1",label:e(a)("ac.OperatingMode"),value:"--"},null,8,["label"])),t(n,{class:"flex-1",label:e(a)("ac.CellTemperature"),value:e(o).roundString(l.value.CellTemperature,0),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.CellCoolPoint"),value:e(o).roundString(l.value.CellCoolPoint,0),unit:"℃"},null,8,["label","value"])]),i("div",Se,[t(n,{class:"flex-1",label:e(a)("ac.CellCoolPointDiff"),value:e(o).roundString(l.value.CellCoolPointDiff,0),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.CellHeatPoint"),value:e(o).roundString(l.value.CellHeatPoint,0),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-[2]",label:e(a)("ac.CellHeatReturnDiff"),value:e(o).roundString(l.value.CellHeatReturnDiff,0),unit:"℃"},null,8,["label","value"])])])])]),S.value?(r(),h(B,{key:0,modelValue:b.value,"onUpdate:modelValue":v[2]||(v[2]=c=>b.value=c),class:"detail-content-left-collapse"},{default:y(()=>[t(E,{name:"1"},{title:y(()=>[t(n,{label:e(a)("home.adminData"),"label-style":{fontWeight:600,fontSize:"14px",color:"#333333"},value:"","enable-row":!0,"icon-type":e(d).adminData},null,8,["label","icon-type"])]),default:y(()=>[i("div",xe,[i("div",Ce,[t(n,{class:"flex-1",label:e(a)("ac.AirSwVersion"),value:e(o).roundString(l.value.AirSwVersion,0)},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirExterRunState"),value:l.value.AirExterRunState===void 0?"--":e(a)(C(l.value.AirExterRunState))},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirInterRunState"),value:l.value.AirInterRunState===void 0?"--":e(a)(C(l.value.AirInterRunState))},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirCompressRunState"),value:l.value.AirCompressRunState===void 0?"--":e(a)(C(l.value.AirCompressRunState))},null,8,["label","value"])]),i("div",Ie,[t(n,{class:"flex-1",label:e(a)("ac.AirHeatRunState"),value:l.value.AirHeatRunState===void 0?"--":e(a)(C(l.value.AirHeatRunState))},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirOutCoilTemp"),value:e(o).roundString(l.value.AirOutCoilTemp,2),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirExhaustTemp"),value:e(o).roundString(l.value.AirExhaustTemp,2),unit:"℃"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirInterCoilTemp"),value:e(o).roundString(l.value.AirInterCoilTemp,2),unit:"℃"},null,8,["label","value"])]),i("div",ye,[t(n,{class:"flex-1",label:e(a)("ac.AirInputCurrent"),value:e(o).roundString(l.value.AirInputCurrent,3),unit:"A"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirACVoltage"),value:e(o).roundString(l.value.AirACVoltage,0),unit:"V"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirBusVoltage"),value:e(o).roundString(l.value.AirBusVoltage,2),unit:"V"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirCompressorCurrent"),value:e(o).roundString(l.value.AirCompressorCurrent,3),unit:"A"},null,8,["label","value"])]),i("div",Re,[t(n,{class:"flex-1",label:e(a)("ac.AirExterFanSpeed"),value:e(o).roundString(l.value.AirExterFanSpeed,0),unit:"rpm"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirInterFanSpeed"),value:e(o).roundString(l.value.AirInterFanSpeed,0),unit:"rpm"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirCompressorFre"),value:e(o).roundString(l.value.AirCompressorFre,0),unit:"Hz"},null,8,["label","value"]),t(n,{class:"flex-1",label:e(a)("ac.AirExpansionOpen"),value:e(o).roundString(l.value.AirExpansionOpen,0),unit:"pls"},null,8,["label","value"])]),i("div",we,[t(n,{class:"flex-1",label:e(a)("ac.AirExhaustPressure"),value:e(o).roundString(l.value.AirExhaustPressure,2),unit:"bar"},null,8,["label","value"])])])]),_:1})]),_:1},8,["modelValue"])):w("",!0)]),i("div",He,[i("div",Pe,[i("div",Te,[i("span",null,R(e(a)("ac.detail.acFailureWarnings")),1),De,i("span",{style:U({color:u.value.length?"#e01f00":"#86909C"})},R(u.value.length),5),ke]),u.value.length?w("",!0):(r(),_("div",Ve,R(e(a)("ac.detail.noWarnings")),1)),i("div",Fe,[(r(!0),_($,null,J(u.value,(c,L)=>(r(),_("div",{key:L,class:j(c.showType=="warn"?"detail-content-right-message-panel-warning-item-warn":"detail-content-right-message-panel-warning-item-error")},[(r(),h(D(c.showType=="warn"?e(le):e(ae)),{width:"12px",height:"12px",class:"mt-[6px] ml-[8px]"})),i("span",null,R(e(a)(c.i18n1Key)),1)],2))),128))])])])]),t(ne,{modelValue:x.value,"onUpdate:modelValue":v[3]||(v[3]=c=>x.value=c),slave:parseInt(e(p).params.id)},null,8,["modelValue","slave"])])}}}),al=Q(Oe,[["__scopeId","data-v-d77a4cbf"]]);export{al as default};
