var b=(T,s,n)=>new Promise((y,p)=>{var _=r=>{try{i(n.next(r))}catch(v){p(v)}},l=r=>{try{i(n.throw(r))}catch(v){p(v)}},i=r=>r.done?y(r.value):Promise.resolve(r.value).then(_,l);i((n=n.apply(T,s)).next())});import{I as u}from"./index-zPJBks9f.js";import{I as m}from"./icontype-wbc23cyS.js";import{D as V}from"./index-Btrfdz_5.js";import{h as L,a as R,b as q,g as z}from"./home-DhA94XgE.js";import G from"./homeSvg-duNrCwxQ.js";import F from"./homePowerSvg-Bmx-pOo9.js";import{d as K,l as J,K as Q,r as f,G as W,D as X,a as Y,L as Z,M as ee,o as x,b as M,f as e,t as a,u as t,n as w,q as g,g as o,e as c,y as U,_ as te}from"./index-BSlF4gO8.js";import{u as le}from"./useTimer-DPmIGUt7.js";import"./icon-power-off-CJaF8cS6.js";import"./comInterrupt-Cm5Fxwa_.js";import"./mitt-E5P-NQ8u.js";import"./index.vue_vue_type_script_setup_true_lang-DUsDJS5Q.js";import"./index-Dxk3FQJj.js";import"./hooks-DCJ-OHnd.js";import"./arrow-right-bold-DCPknizU.js";import"./homeBattery.vue_vue_type_script_setup_true_lang-BNhASKP0.js";import"./box-CAtnbw5X.js";import"./stackBattery.vue_vue_type_script_setup_true_lang-BkMjiF2A.js";const ae={class:"header dark:!text-white flex items-center justify-between h-[48px]"},se={class:"header-left flex items-center"},oe={class:"ml-[4px]"},ne={class:"header-right flex items-center"},ce={class:"content"},ie={class:"content-left"},re={class:"flex"},ue={class:"flex flex-col flex-1"},me={class:"flex flex-col flex-1"},de={class:"power mb-[16px]"},pe={class:"title dark:!text-white"},ve={class:"charge flex"},he={class:"content-right"},xe={class:"fault flex"},_e={class:"title dark:!text-white"},fe={class:"content flex text-[12px]"},ge={class:"flex flex-col text-center w-[68px] mr-[8px]"},ye={class:"h-[24px] bg-red-200 text-red-600"},be={class:"h-[28px] dark:!text-white"},we={class:"flex flex-col text-center w-[68px] mr-[8px]"},Te={class:"h-[24px] bg-amber-200 text-yellow-600"},Ce={class:"h-[28px] dark:!text-white"},Se={class:"title dark:!text-white"},ke={class:"content flex text-[12px]"},Ne={class:"flex flex-col text-center w-[68px] mr-[8px]"},De={class:"h-[24px] bg-amber-200 text-yellow-600"},Pe={class:"h-[28px] dark:!text-white"},Ie={class:"flex flex-col text-center w-[68px] mr-[8px]"},He={class:"h-[24px] bg-cyan-100 text-green-500"},Ee={class:"h-[28px] dark:!text-white"},Ae={class:"flex flex-col text-center w-[68px] mr-[8px]"},Be={class:"h-[24px] bg-cyan-100 text-green-500"},je={class:"h-[28px] dark:!text-white"},Me={class:"flex flex-col text-center w-[68px]"},Ue={class:"h-[24px] bg-indigo-200 text-blue-800"},$e={class:"h-[28px] dark:!text-white"},Oe={key:1,class:"powerPig flex justify-center items-center"},Ve={class:"tabs flex text-center"},Le=K({name:"Home",__name:"index",setup(T){const{t:s}=J(),{$f:n,$axiosCancel:y}=Q(),p=f(!0),_=f(),l=f({}),i=f(0),r=()=>{if(i.value===0){const h=document.querySelector(".topoMap"),d=h.offsetHeight/471;h.style.transform=`scale(${d>1.1?1.1:d<.8?.8:d})`}},v=()=>b(this,null,function*(){y("/lcmain?type=homePageInfo");const h=yield z();h.code===200&&(l.value=h.data)});return le(()=>{p.value=!1,v()}),W(()=>b(this,null,function*(){p.value=!0,yield v(),X(_,()=>{r()}),p.value=!1})),(h,d)=>{var C,S,k,N,D,P,I,H,E,A,B,j;const $=Y("el-divider"),O=Z("load");return ee((x(),M("div",{ref_key:"homeRef",ref:_,class:"home"},[e("div",ae,[e("div",se,[e("span",null,a(t(s)("home.energyStorage"))+"#1",1),e("span",{class:w(["standstill flex items-center",{charge:l.value.State===1,discharge:l.value.State===2}])},[l.value.State===0?(x(),g(t(L),{key:0})):l.value.State===1?(x(),g(t(R),{key:1})):(x(),g(t(q),{key:2})),e("span",oe,a(t(s)(`common.${l.value.State===0?"standstill":l.value.State===1?"charge":"discharge"}`)),1)],2)]),e("div",ne,[e("div",null,[o(" PCS "),e("span",null,[o(" ("),e("span",null,a((C=l.value.PcsCurrentNum)!=null?C:0),1),o("/"+a((S=l.value.PcsTotalNum)!=null?S:0)+") ",1)])]),e("div",null,[o(a(t(s)("common.batteryStack"))+" ",1),e("span",null,[o(" ("),e("span",null,a((k=l.value.BatteryStackCurrentNum)!=null?k:0),1),o("/"+a((N=l.value.BatteryStackTotalNum)!=null?N:0)+") ",1)])]),e("div",null,[o(a(t(s)("common.batteryCluster"))+" ",1),e("span",null,[o(" ("),e("span",null,a((D=l.value.BatteryClusterCurrentNum)!=null?D:0),1),o("/"+a((P=l.value.BatteryClusterTotalNum)!=null?P:0)+") ",1)])]),e("div",null,[o(a(t(s)("common.ac"))+" ",1),e("span",null,[o(" ("),e("span",null,a((I=l.value.AirCurrentNum)!=null?I:0),1),o("/"+a((H=l.value.AirTotalNum)!=null?H:0)+") ",1)])]),e("div",null,[o(a(t(s)("common.meter"))+" ",1),e("span",null,[o(" ("),e("span",null,a((E=l.value.MeterCurrentNum)!=null?E:0),1),o("/"+a((A=l.value.MeterTotalNum)!=null?A:0)+") ",1)])]),e("div",null,[o(a(t(s)("deviceInfo.tempAndHumidityInfo"))+" ",1),e("span",null,[o(" ("),e("span",null,a((B=l.value.TempHumiCurrentNum)!=null?B:0),1),o("/"+a((j=l.value.TempHumiTotalNum)!=null?j:0)+") ",1)])])])]),e("div",ce,[e("div",ie,[e("div",re,[e("div",ue,[c(u,{class:"mb-[16px]",label:"SOC",value:`${t(n).num(l.value.SOC,1)}%`,iconType:t(m).soc},null,8,["value","iconType"]),c(u,{class:"mb-[16px]",label:t(s)("home.todayChargeEnergy"),"value-unit":t(n).energyUnit(l.value.TodayCharge,{num:1,flag:2}),iconType:t(m).chargeEnergy},null,8,["label","value-unit","iconType"]),c(u,{label:t(s)("home.todayDischargeEnergy"),"value-unit":t(n).energyUnit(l.value.TodayDischarge,{num:1,flag:2}),iconType:t(m).dischargeEnergy},null,8,["label","value-unit","iconType"])]),e("div",me,[c(u,{class:"mb-[16px]",label:"SOH",value:`${t(n).num(l.value.SOH,1)}%`,iconType:t(m).soh},null,8,["value","iconType"]),c(u,{class:"mb-[16px]",label:t(s)("common.totalChargeEnergy"),"value-unit":t(n).energyUnit(l.value.CumulativeCharge,{num:2,flag:2}),iconType:t(m).totalChargeEnergy},null,8,["label","value-unit","iconType"]),c(u,{label:t(s)("common.totalDischargeEnergy"),"value-unit":t(n).energyUnit(l.value.CumulativeDischarge,{num:2,flag:2}),iconType:t(m).totalDischargeEnergy},null,8,["label","value-unit","iconType"])])]),c($,{class:"!my-[12px]"}),e("div",de,[e("div",pe,a(t(s)("common.activePower")),1),e("div",ve,[c(u,{class:"flex-1",label:"PCS","value-unit":t(n).powerUnit(l.value.PcsActivePower,{num:2,flag:2}),iconType:t(m).pcs},null,8,["value-unit","iconType"]),c(u,{class:"flex-1",label:t(s)("common.grid"),"value-unit":t(n).powerUnit(l.value.GridActivePower,{num:2,flag:2}),iconType:t(m).grid},null,8,["label","value-unit","iconType"]),c(u,{class:"flex-1",label:t(s)("common.load"),"value-unit":t(n).powerUnit(l.value.LoadActivePower,{num:2,flag:2}),iconType:t(m).load},null,8,["label","value-unit","iconType"])])]),c(V,{title:t(s)("home.powerCurve"),"module-name":"home"},null,8,["title"])]),e("div",he,[e("div",xe,[e("div",null,[e("div",_e,a(t(s)("home.deviceStateNum")),1),e("div",fe,[e("div",ge,[e("span",ye,a(t(s)("common.fault")),1),e("span",be,a(l.value.DeviceFaultNum),1)]),e("div",we,[e("span",Te,a(t(s)("common.comInterrupt")),1),e("span",Ce,a(l.value.DeviceInterruptNum),1)])])]),e("div",null,[e("div",Se,a(t(s)("home.pcsStateNum")),1),e("div",ke,[e("div",Ne,[e("span",De,a(t(s)("common.shutdown")),1),e("span",Pe,a(l.value.DeviceShutdownNum),1)]),e("div",Ie,[e("span",He,a(t(s)("common.standby")),1),e("span",Ee,a(l.value.DeviceStandbyNum),1)]),e("div",Ae,[e("span",Be,a(t(s)("common.charge")),1),e("span",je,a(l.value.DeviceChargeNum),1)]),e("div",Me,[e("span",Ue,a(t(s)("common.discharge")),1),e("span",$e,a(l.value.DeviceDischargeNum),1)])])])]),i.value===0?(x(),g(G,{key:0,"home-obj":l.value,class:"topoMap"},null,8,["home-obj"])):U("",!0),i.value===1?(x(),M("div",Oe,[c(F,{"home-obj":l.value},null,8,["home-obj"])])):U("",!0),e("div",Ve,[e("span",{class:w({isActive:i.value===0}),onClick:d[0]||(d[0]=()=>{i.value=0})},a(t(s)("home.structurePic")),3),e("span",{class:w({isActive:i.value===1}),onClick:d[1]||(d[1]=()=>{i.value=1})},a(t(s)("home.powerPic")),3)])])])])),[[O,p.value]])}}}),ct=te(Le,[["__scopeId","data-v-34db2d18"]]);export{ct as default};
