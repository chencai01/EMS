var Wn=Object.defineProperty,Ln=Object.defineProperties;var xn=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var Pn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable;var S=(n,r,s)=>r in n?Wn(n,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[r]=s,_=(n,r)=>{for(var s in r||(r={}))Pn.call(r,s)&&S(n,s,r[s]);if($)for(var s of $(r))Fn.call(r,s)&&S(n,s,r[s]);return n},T=(n,r)=>Ln(n,xn(r));var e=(n,r,s)=>S(n,typeof r!="symbol"?r+"":r,s);var k=(n,r,s)=>new Promise((i,A)=>{var E=u=>{try{l(s.next(u))}catch(d){A(d)}},B=u=>{try{l(s.throw(u))}catch(d){A(d)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(E,B);l((s=s.apply(n,r)).next())});import{o as w,b as v,f as a,h as Mn,d as En,l as Bn,r as R,c as Sn,a as K,q,w as F,z,t as g,u as o,i as O,F as j,e as J,y as qn,n as Hn,A as Nn,B as $n,C as kn,_ as Rn}from"./index-BSlF4gO8.js";import{I as Kn}from"./icon-warn-Cj0GEASQ.js";import zn from"./index-zqP5zD92.js";import{I as On}from"./icontype-wbc23cyS.js";import{I as jn}from"./index-zPJBks9f.js";import{w as M,B as t}from"./WarningsUtil-CTO3mp7U.js";import{E as Jn,a as Qn,b as Zn,c as Un,d as Gn,e as Xn,f as Yn,h as Vn,i as Dn,j as bn,k as ne,l as ee}from"./pcs-NJQvBWG2.js";import{a as re,b as se,c as te,d as ae,e as ie,f as le,h as oe,i as pe,j as ue,k as ge,B as we,l as ce,m as ye,n as me}from"./cluster-JMpJuoxf.js";import"./icon-power-off-CJaF8cS6.js";import"./comInterrupt-Cm5Fxwa_.js";import"./valueUtil-BReNmlgC.js";const _e={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 14 14"},Te=a("g",{fill:"none","fill-rule":"evenodd"},[a("path",{d:"M0 0h14v14H0z"}),a("path",{fill:"#E01F00",d:"M6.993 1q1.245 0 2.341.475a6.1 6.1 0 0 1 1.907 1.284q.81.81 1.284 1.9Q13 5.749 13 6.993q0 1.245-.475 2.341a6.1 6.1 0 0 1-1.284 1.907q-.81.81-1.907 1.284a5.8 5.8 0 0 1-2.34.475q-1.245 0-2.335-.475a6.1 6.1 0 0 1-1.9-1.284 6.1 6.1 0 0 1-1.284-1.907A5.8 5.8 0 0 1 1 6.994q0-1.245.475-2.335a6.1 6.1 0 0 1 1.284-1.9 6.1 6.1 0 0 1 1.9-1.284A5.8 5.8 0 0 1 6.993 1M5.222 4.102a.2.2 0 0 0-.283 0l-.82.819a.2.2 0 0 0 0 .283l1.783 1.782L4.12 8.769a.2.2 0 0 0 0 .283l.819.819a.2.2 0 0 0 .283 0l1.782-1.783 1.783 1.783a.2.2 0 0 0 .23.037l.053-.037.819-.82a.2.2 0 0 0 0-.282L8.106 6.986l1.783-1.782a.2.2 0 0 0 0-.283l-.82-.82a.2.2 0 0 0-.282 0L7.004 5.885Z"})],-1),Ae=[Te];function he(n,r){return w(),v("svg",_e,[...Ae])}const ve={render:he},Ce={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 14 14"},de=a("g",{fill:"none","fill-rule":"evenodd"},[a("path",{d:"M0 0h14v14H0z"}),a("path",{fill:"#1BC8A6",d:"M6.993 1q1.245 0 2.341.475a6.1 6.1 0 0 1 1.907 1.284q.81.81 1.284 1.9Q13 5.749 13 6.993q0 1.245-.475 2.341a6.1 6.1 0 0 1-1.284 1.907q-.81.81-1.907 1.284a5.8 5.8 0 0 1-2.34.475q-1.245 0-2.335-.475a6.1 6.1 0 0 1-1.9-1.284 6.1 6.1 0 0 1-1.284-1.907A5.8 5.8 0 0 1 1 6.994q0-1.245.475-2.335a6.1 6.1 0 0 1 1.284-1.9 6.1 6.1 0 0 1 1.9-1.284A5.8 5.8 0 0 1 6.993 1m2.119 3.943a.2.2 0 0 0-.283 0L6.215 7.556 4.704 6.045a.2.2 0 0 0-.283 0l-.82.82a.2.2 0 0 0 0 .282l2.473 2.472a.2.2 0 0 0 .283 0L9.93 6.045a.2.2 0 0 0 0-.283Z"})],-1),fe=[de];function Ie(n,r){return w(),v("svg",Ce,[...fe])}const We={render:Ie};class c{constructor(){e(this,"instanceProperty")}}e(c,"active_power_control_mode",new t(0,"有功控制模式","warnings.active_power_control_mode","","warn")),e(c,"reactive_power_control_mode",new t(0,"无功控制模式","warnings.reactive_power_control_mode","","warn")),e(c,"control_mode",new t(0,"控制模式","warnings.control_mode","","warn")),e(c,"bms_protocol",new t(0,"Bms协议类型","warnings.bms_protocol","","warn")),e(c,"startup_mode",new t(0,"启动方式","warnings.startup_mode","","warn")),e(c,"in_dry_contact_A_func",new t(0,"输入干节点A定制功能","warnings.in_dry_contact_A_func","","warn")),e(c,"in_dry_contact_C_func",new t(0,"输入干节点C定制功能","warnings.in_dry_contact_C_func","","warn"));const Le=(n,r)=>M.getAllWarningInfoListWithoutFilter({WarningClassType:c,value:n,valueIsKey:!0},{WarningClassType:Jn,value:n==null?void 0:n.err_msg_1},{WarningClassType:Qn,value:n==null?void 0:n.err_msg_2},{WarningClassType:Zn,value:n==null?void 0:n.err_msg_3},{WarningClassType:Un,value:n==null?void 0:n.err_msg_4},{WarningClassType:Gn,value:n==null?void 0:n.err_msg_5},{WarningClassType:Xn,value:n==null?void 0:n.err_msg_6},{WarningClassType:Yn,value:n==null?void 0:n.err_msg_7},{WarningClassType:Vn,value:n==null?void 0:n.err_msg_8},{WarningClassType:Dn,value:n==null?void 0:n.err_msg_9},{WarningClassType:bn,value:n==null?void 0:n.err_msg_10},{WarningClassType:ne,value:n==null?void 0:n.err_msg_11},{WarningClassType:ee,value:n==null?void 0:n.err_msg_12}).map(s=>T(_({},s),{extra:T(_({},s.extra),{prefix:` #${r+1} `})})),xe=n=>{var r;return{moduleNameI18nKey:"common.pcs",warningInfoList:(r=n==null?void 0:n.pcs)==null?void 0:r.flatMap((s,i)=>Le(s,i))}};class Z{constructor(){e(this,"instanceProperty")}}e(Z,"bit0",new t(0,"高温告警","warnings.airHighTempAlarm"));class U{constructor(){e(this,"instanceProperty")}}e(U,"bit0",new t(0,"低温告警","warnings.airLowTempAlarm"));class G{constructor(){e(this,"instanceProperty")}}e(G,"bit0",new t(0,"高湿告警","warnings.airHighRHAlarm"));class X{constructor(){e(this,"instanceProperty")}}e(X,"bit0",new t(0,"低湿告警","warnings.airLowRHAlarm"));class Y{constructor(){e(this,"instanceProperty")}}e(Y,"bit0",new t(0,"电加热保护","warnings.airElectricHeatAlarm"));class V{constructor(){e(this,"instanceProperty")}}e(V,"bit0",new t(0,"室外环境温度故障","warnings.airOutTempAlarm"));class D{constructor(){e(this,"instanceProperty")}}e(D,"bit0",new t(0,"外盘管温度故障","warnings.airOutCoilTempAlarm"));class b{constructor(){e(this,"instanceProperty")}}e(b,"bit0",new t(0,"排气温度故障","warnings.airExhaustTempAlarm"));class nn{constructor(){e(this,"instanceProperty")}}e(nn,"bit0",new t(0,"内环境温度1故障","warnings.airInterTemp1Alarm"));class en{constructor(){e(this,"instanceProperty")}}e(en,"bit0",new t(0,"内环境湿度1故障","warnings.airInterRH1Alarm"));class rn{constructor(){e(this,"instanceProperty")}}e(rn,"bit0",new t(0,"内盘管温度故障","warnings.airTempInterCoilAlarm"));class sn{constructor(){e(this,"instanceProperty")}}e(sn,"bit0",new t(0,"压力传感器故障","warnings.airPressureAlarm"));class tn{constructor(){e(this,"instanceProperty")}}e(tn,"bit0",new t(0,"排气温度过高保护","warnings.airExhaustHighTempAlarm"));class an{constructor(){e(this,"instanceProperty")}}e(an,"bit0",new t(0,"外盘管温度保护","warnings.airInCoilTempAlarm"));class ln{constructor(){e(this,"instanceProperty")}}e(ln,"bit0",new t(0,"内盘管温度保护","warnings.airInterCoilTempAlarm"));class on{constructor(){e(this,"instanceProperty")}}e(on,"bit0",new t(0,"内风机故障","warnings.airInterFanAlarm"));class pn{constructor(){e(this,"instanceProperty")}}e(pn,"bit0",new t(0,"内风机通讯故障","warnings.airInterCommFanAlarm"));class un{constructor(){e(this,"instanceProperty")}}e(un,"bit0",new t(0,"内风机过载故障","warnings.airInternalFanLoadAlarm"));class gn{constructor(){e(this,"instanceProperty")}}e(gn,"bit0",new t(0,"外风机故障","warnings.airExternalfanAlarm"));class wn{constructor(){e(this,"instanceProperty")}}e(wn,"bit0",new t(0,"外风机通讯故障","warnings.airExterFanCommAlarm"));class cn{constructor(){e(this,"instanceProperty")}}e(cn,"bit0",new t(0,"外风机过载故障","warnings.airExterFanLoadAlarm"));class yn{constructor(){e(this,"instanceProperty")}}e(yn,"bit0",new t(0,"压缩机启动故障","warnings.airCompressorStartAlarm"));class mn{constructor(){e(this,"instanceProperty")}}e(mn,"bit0",new t(0,"压缩机通讯故障","warnings.airCompressorCommAlarm"));const Pe=(n,r)=>M.getAllWarningInfoListWithoutFilter({WarningClassType:Z,value:n==null?void 0:n.AirHighTempAlarm,showType:"warn"},{WarningClassType:U,value:n==null?void 0:n.AirLowTempAlarm,showType:"warn"},{WarningClassType:G,value:n==null?void 0:n.AirHighRHAlarm,showType:"warn"},{WarningClassType:X,value:n==null?void 0:n.AirLowRHAlarm,showType:"warn"},{WarningClassType:Y,value:n==null?void 0:n.AirElectricHeatAlarm,showType:"warn"},{WarningClassType:V,value:n==null?void 0:n.AirOutTempAlarm,showType:"error"},{WarningClassType:D,value:n==null?void 0:n.AirOutCoilTempAlarm,showType:"error"},{WarningClassType:b,value:n==null?void 0:n.AirExhaustTempAlarm,showType:"error"},{WarningClassType:nn,value:n==null?void 0:n.AirInterTemp1Alarm,showType:"error"},{WarningClassType:en,value:n==null?void 0:n.AirInterRH1Alarm,showType:"error"},{WarningClassType:rn,value:n==null?void 0:n.AirTempInterCoilAlarm,showType:"error"},{WarningClassType:sn,value:n==null?void 0:n.AirPressureAlarm,showType:"error"},{WarningClassType:tn,value:n==null?void 0:n.AirExhaustHighTempAlarm,showType:"warn"},{WarningClassType:an,value:n==null?void 0:n.AirInCoilTempAlarm,showType:"warn"},{WarningClassType:ln,value:n==null?void 0:n.AirInterCoilTempAlarm,showType:"warn"},{WarningClassType:on,value:n==null?void 0:n.AirInterFanAlarm,showType:"error"},{WarningClassType:pn,value:n==null?void 0:n.AirInterCommFanAlarm,showType:"error"},{WarningClassType:un,value:n==null?void 0:n.AirInternalFanLoadAlarm,showType:"error"},{WarningClassType:gn,value:n==null?void 0:n.AirExternalfanAlarm,showType:"error"},{WarningClassType:wn,value:n==null?void 0:n.AirExterFanCommAlarm,showType:"error"},{WarningClassType:cn,value:n==null?void 0:n.AirExterFanLoadAlarm,showType:"error"},{WarningClassType:yn,value:n==null?void 0:n.AirCompressorStartAlarm,showType:"error"},{WarningClassType:mn,value:n==null?void 0:n.AirCompressorCommAlarm,showType:"error"}).map(s=>T(_({},s),{extra:T(_({},s.extra),{prefix:` #${r+1} `})})),Fe=n=>{var r;return{moduleNameI18nKey:"common.ac",warningInfoList:(r=n==null?void 0:n.ac)==null?void 0:r.flatMap((s,i)=>Pe(s,i))}};class _n{constructor(){e(this,"instanceProperty")}}e(_n,"bit0",new t(0,"Lc和Bms通讯异常","warnings.LCAndBMS"));class Tn{constructor(){e(this,"instanceProperty")}}e(Tn,"bit0",new t(0,"Lc和Pcs通讯异常","warnings.LcAndPCS"));class An{constructor(){e(this,"instanceProperty")}}e(An,"bit0",new t(0,"Lc和AC通讯异常","warnings.LcAndAC"));class hn{constructor(){e(this,"instanceProperty")}}e(hn,"bit0",new t(0,"Lc和电表通讯异常","warnings.LcAndEnergyMeter","",null,{i18n1Options:{number:0}}));class vn{constructor(){e(this,"instanceProperty")}}e(vn,"bit0",new t(0,"Lc和温湿度传感器通讯异常","warnings.lcAndTempHumi"));class Cn{constructor(){e(this,"instanceProperty")}}e(Cn,"bit0",new t(0,"BMS和PCS通讯异常","warnings.bmsAndPcs"));class dn{constructor(){e(this,"instanceProperty")}}e(dn,"bit0",new t(0,"PCS和BMS通讯异常","warnings.PcsAndBMS"));const Q={lcAndPcs:Tn,lcAndBms:_n,lcAndAc:An,lcAndEnergyMeter:hn,lcAndTempHumi:vn,pcsAndBms:dn,bmsAndPcs:Cn},Me=n=>n==1?0:1,Ee=n=>{if(JSON.stringify(n)==="{}")return[];const r=[];for(const s in Q)for(let i=0;i<(n==null?void 0:n.communication[s].length);i++){const A={WarningClassType:Q[s],value:Me(n==null?void 0:n.communication[s][i]),extra:{i18n1Options:{number:i+1}}};r.push(A)}return r},Be=n=>M.getAllWarningInfoListWithoutFilter(...Ee(n)),Se=n=>({moduleNameI18nKey:"common.system",warningInfoList:Be(n)}),qe=(n,r)=>M.getAllWarningInfoListWithoutFilter({WarningClassType:re,value:n==null?void 0:n.Alarm1,showType:"warn"},{WarningClassType:se,value:n==null?void 0:n.Alarm2,showType:"warn"},{WarningClassType:te,value:n==null?void 0:n.Alarm3,showType:"warn"},{WarningClassType:ae,value:n==null?void 0:n.Alarm4,showType:"warn"},{WarningClassType:ie,value:n==null?void 0:n.Fault1,showType:"error"},{WarningClassType:le,value:n==null?void 0:n.Fault2,showType:"error"},{WarningClassType:oe,value:n==null?void 0:n.Fault3,showType:"error"},{WarningClassType:pe,value:n==null?void 0:n.Fault4,showType:"error"},{WarningClassType:ue,value:n==null?void 0:n.Fault5,showType:"error"},{WarningClassType:ge,value:n==null?void 0:n.Fault6,showType:"error"},{WarningClassType:we,value:n==null?void 0:n.BmuFireAlarmMalfunction,showType:"error"},{WarningClassType:ce,value:n==null?void 0:n.BmuAFECommunicationFailure,showType:"error"},{WarningClassType:ye,value:n==null?void 0:n.BmuThermalRunaway,showType:"error"},{WarningClassType:me,value:n==null?void 0:n.BmuFanMalfunction,showType:"error"}).map(s=>T(_({},s),{extra:T(_({},s.extra),{prefix:` #${r+1} `})})),He=n=>{var r;return{moduleNameI18nKey:"common.bms",warningInfoList:(r=n==null?void 0:n.bms)==null?void 0:r.flatMap((s,i)=>qe(s,i))}},Ne={requestInspection:()=>Mn.request("get","/lcmain?type=devicePoll")},$e=n=>[Se(n),xe(n),He(n),Fe(n)],C=n=>($n("data-v-c13308d9"),n=n(),kn(),n),ke={class:"page-container"},Re={class:"inspection-message"},Ke={class:"flex flex-row items-center justify-start"},ze={class:"inspection-message-title-item"},Oe=C(()=>a("span",null,"(",-1)),je={style:{color:"#1bc8a6"}},Je=C(()=>a("span",null,")",-1)),Qe={class:"inspection-message-title-item"},Ze=C(()=>a("span",null,"(",-1)),Ue={style:{color:"#ff9900"}},Ge=C(()=>a("span",null,")",-1)),Xe={class:"inspection-message-title-item"},Ye=C(()=>a("span",null,"(",-1)),Ve=C(()=>a("span",null,")",-1)),De={class:"inspection-collapse-content"},be={class:"inspection-message-panel"},nr={key:0,class:"inspection-message-panel-warning-empty"},er={class:"inspection-message-panel-warning-scroll-container"},rr=En({name:"AutomaticInspection",__name:"index",setup(n){const{t:r}=Bn(),s=R({}),i=R(!1),A=Sn(()=>$e(s.value)),E=()=>{B()},B=()=>k(this,null,function*(){if(i.value!=!0){i.value=!0;try{const l=yield Ne.requestInspection();(l==null?void 0:l.code)==200?JSON.stringify(l.data)!=JSON.stringify(s.value)&&(s.value=l.data):(console.warn("--[inspection] requestInspection invalid code",l==null?void 0:l.code),s.value=null)}catch(l){console.warn("--[inspection] requestInspection error=",l==null?void 0:l.message),s.value=null}i.value=!1}});return(l,u)=>{const d=K("el-collapse-item"),fn=K("el-collapse");return w(),q(zn,{"active-name":"automaticInspection"},{default:F(()=>[a("div",ke,[a("div",{class:"start-button",style:z({backgroundColor:i.value?"#999999":"var(--el-color-primary)"}),onClick:E},g(i.value?o(r)("inspection.inspecting"):o(r)("inspection.startInspect")),5),a("div",Re,[(w(!0),v(j,null,O(A.value,(y,In)=>(w(),q(fn,{key:In,class:"inspection-collapse",accordion:!1,modelValue:"1",onChange:u[0]||(u[0]=h=>{})},{default:F(()=>[J(d,{name:"1"},{title:F(()=>{var h,p,P,f,I,W,L,x,H,N;return[a("div",Ke,[J(jn,{label:o(r)(y.moduleNameI18nKey),"label-style":{fontWeight:600,fontSize:"14px",color:"#333333"},value:"","enable-row":!0,"icon-type":o(On).batteryInfo},null,8,["label","icon-type"]),a("div",ze,[a("span",null,g(o(r)("inspection.normal")),1),Oe,a("span",je,g((P=(p=(h=y.warningInfoList)==null?void 0:h.filter(m=>m.value==0))==null?void 0:p.length)!=null?P:0),1),Je]),a("div",Qe,[a("span",null,g(o(r)("inspection.warning")),1),Ze,a("span",Ue,g((W=(I=(f=y.warningInfoList)==null?void 0:f.filter(m=>m.value!=0&&m.showType=="warn"))==null?void 0:I.length)!=null?W:0),1),Ge]),a("div",Xe,[a("span",null,g(o(r)("inspection.fault")),1),Ye,a("span",{style:z({color:(L=y.warningInfoList)!=null&&L.length?"#e01f00":"#86909C"})},g((N=(H=(x=y.warningInfoList)==null?void 0:x.filter(m=>m.value!=0&&m.showType!="warn"))==null?void 0:H.length)!=null?N:0),5),Ve])])]}),default:F(()=>{var h;return[a("div",De,[a("div",be,[(h=y.warningInfoList)!=null&&h.length?qn("",!0):(w(),v("div",nr,g(o(r)("cluster.detail.noWarnings")),1)),a("div",er,[(w(!0),v(j,null,O(y.warningInfoList,(p,P)=>{var f,I,W,L,x;return w(),v("div",{key:P,class:Hn(p.value==0?"inspection-message-panel-warning-item-normal":p.showType=="warn"?"inspection-message-panel-warning-item-warn":"inspection-message-panel-warning-item-error")},[(w(),q(Nn(p.value==0?o(We):p.showType=="warn"?o(Kn):o(ve)),{width:"12px",height:"12px",class:"mt-[6px] ml-[8px]"})),a("span",null,g(((I=(f=p.extra)==null?void 0:f.prefix)!=null?I:"")+o(r)(p.i18n1Key,(W=p.extra)==null?void 0:W.i18n1Options)+((x=(L=p.extra)==null?void 0:L.suffix)!=null?x:"")),1)],2)}),128))])])])]}),_:2},1024)]),_:2},1024))),128))])])]),_:1})}}}),mr=Rn(rr,[["__scopeId","data-v-c13308d9"]]);export{mr as default};
