import{u as A}from"./station-Dy7Yu9lE.js";import F from"./TimeSelect-DFXJ_pss.js";import R from"./TimeStep-CdBM5cGM.js";import{S as q,W,I as G,P as H,M as J,p as K}from"./utils-CABZ3EnZ.js";import{d as Q,j as X,r as L,x as Y,l as Z,a as g,o as y,m as x,w as s,f as e,u as o,z as m,c as w,n as h,F as I,b as r,t as z,B as ee,C as le,E as k,_ as ae}from"./index-B378b16y.js";const p=b=>(ee("data-v-ba3a77c4"),b=b(),le(),b),te={class:"info-container"},se=p(()=>r("div",{class:"line"},null,-1)),oe={class:"form-title py-[20px]"},ne=p(()=>r("div",{class:"line pb-[20px]"},null,-1)),re={class:"form-title py-[20px]"},ue=p(()=>r("span",{class:"right-span"},"%",-1)),ie=p(()=>r("span",{class:"right-span"},"%",-1)),de=p(()=>r("span",{class:"right-span"},"kWh",-1)),me=p(()=>r("span",{class:"right-span"},"kWh",-1)),pe=p(()=>r("span",{class:"right-span"},"kW",-1)),_e=p(()=>r("span",{class:"right-span"},"kW",-1)),ce=p(()=>r("span",{class:"right-span"},"kW",-1)),ye=p(()=>r("span",{class:"right-span"},"(10-100)",-1)),fe=p(()=>r("span",{class:"right-span"},"V",-1)),ve=p(()=>r("span",{class:"right-span"},"V",-1)),ge=p(()=>r("span",{class:"right-span"},"â„ƒ",-1)),be=p(()=>r("div",{class:"line"},null,-1)),Ve={class:"form-title py-[20px]"},xe=p(()=>r("span",{class:"right-span"},"kW",-1)),we=p(()=>r("span",{class:"right-span"},"kW",-1)),_=6,he=Q({name:"TemplateTime",__name:"TemplateInfo",props:{index:{type:Number,default:0},template:{type:Object,default:()=>{}}},emits:["changeTemplateInfo"],setup(b,{emit:P}){const B=P,{t:n}=X(),V=L(A().$state.ratedPower||100),E=b,a=Y(()=>E.template),C=L();Z(()=>a.value.time_selects,f=>{C.value=f.map(t=>({startIndex:t.startIndex,endIndex:t.endIndex,power:G(t.type)?t.power:null,color:H[t.type]}))},{deep:!0,immediate:!0});const d=(f=150)=>({width:`${f}px`}),M=f=>{const t=a.value.time_selects[f];if(t.endIndex===null){k.warning(n("strategy.endTimeWarning"));return}if(t.type===null){k.warning(n("strategy.workModeWarning"));return}if(K(t.type,t.power)){k.warning(n("strategy.planingPowerWarning"));return}a.value.time_selects.push({startIndex:t.endIndex,endIndex:null,power:null,type:null})},N=()=>{B("changeTemplateInfo")},$=f=>{a.value.time_selects.splice(f)};return(f,t)=>{const D=g("el-input"),u=g("el-form-item"),i=g("el-col"),T=g("el-option"),U=g("el-select"),S=g("el-row"),c=g("el-input-number"),O=g("el-form");return y(),x(O,{model:a.value,"label-position":"top"},{default:s(()=>[e(S,null,{default:s(()=>[e(i,{span:12},{default:s(()=>[e(u,{label:o(n)("strategy.name")},{default:s(()=>[e(D,{modelValue:a.value.template_name,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.template_name=l),size:"small",maxlength:10,style:m(d(300))},null,8,["modelValue","style"])]),_:1},8,["label"])]),_:1}),e(i,{span:12},{default:s(()=>[e(u,{label:o(n)("strategy.type")},{default:s(()=>[e(U,{modelValue:a.value.strategy_type,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.strategy_type=l),placeholder:"Select",size:"small"},{default:s(()=>[(y(!0),w(I,null,h(o(q),l=>(y(),x(T,{key:l.value,label:o(n)(l.label),value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),r("div",te,[e(R,{steps:C.value},null,8,["steps"]),se,r("p",oe,z(o(n)("strategy.timeVar")),1),(y(!0),w(I,null,h(a.value.time_selects,(l,v)=>(y(),x(F,{key:v,index:v,config:l,"time-disabled":v<a.value.time_selects.length-1,"show-remove":v===a.value.time_selects.length-1&&v!==0,"show-plus":v===a.value.time_selects.length-1&&l.endIndex!==o(J),onAddTime:j=>M(v),onRemoveTime:j=>$(v),onUpdateTime:N},null,8,["index","config","time-disabled","show-remove","show-plus","onAddTime","onRemoveTime"]))),128)),ne,r("p",re,z(o(n)("strategy.policyVar")),1),e(S,null,{default:s(()=>[e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.socUpperLimit")},{default:s(()=>[e(c,{modelValue:a.value.soc_upper_limit,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.soc_upper_limit=l),style:m(d()),size:"small",controls:!1,precision:0,min:1,max:100},null,8,["modelValue","style"]),ue]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.socLowerLimit")},{default:s(()=>[e(c,{modelValue:a.value.soc_lower_limit,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.soc_lower_limit=l),style:m(d()),size:"small",controls:!1,precision:0,min:1,max:100},null,8,["modelValue","style"]),ie]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.energyStorageCapacity")},{default:s(()=>[e(c,{modelValue:a.value.energy_storage_capacity,"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.energy_storage_capacity=l),style:m(d()),size:"small",controls:!1,precision:0},null,8,["modelValue","style"]),de]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.pvCapacity")},{default:s(()=>[e(c,{modelValue:a.value.photovoltaic_capacity,"onUpdate:modelValue":t[5]||(t[5]=l=>a.value.photovoltaic_capacity=l),style:m(d()),size:"small",controls:!1,precision:0},null,8,["modelValue","style"]),me]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.preventCountercurrent")},{default:s(()=>[e(U,{modelValue:a.value.prevent_countercurrent,"onUpdate:modelValue":t[6]||(t[6]=l=>a.value.prevent_countercurrent=l),size:"small",style:m(d())},{default:s(()=>[(y(!0),w(I,null,h(o(W),l=>(y(),x(T,{key:l.value,label:o(n)(l.label),value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","style"])]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.demandControl")},{default:s(()=>[e(U,{modelValue:a.value.demand_control,"onUpdate:modelValue":t[7]||(t[7]=l=>a.value.demand_control=l),size:"small",style:m(d())},{default:s(()=>[(y(!0),w(I,null,h(o(W),l=>(y(),x(T,{key:l.value,label:o(n)(l.label),value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","style"])]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.gridPowerSupplyLowerLimit")},{default:s(()=>[e(c,{modelValue:a.value.grid_power_supply_lower_limit,"onUpdate:modelValue":t[8]||(t[8]=l=>a.value.grid_power_supply_lower_limit=l),style:m(d()),disabled:!a.value.prevent_countercurrent,size:"small",controls:!1,precision:0,max:V.value},null,8,["modelValue","style","disabled","max"]),pe]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.gridPowerSupplyLowerLimitError")},{default:s(()=>[e(c,{modelValue:a.value.grid_power_supply_lower_limit_error,"onUpdate:modelValue":t[9]||(t[9]=l=>a.value.grid_power_supply_lower_limit_error=l),style:m(d()),disabled:!a.value.prevent_countercurrent,size:"small",controls:!1,precision:0,max:V.value},null,8,["modelValue","style","disabled","max"]),_e]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.transformersMaxDemad")},{default:s(()=>[e(c,{modelValue:a.value.transformers_max_demand,"onUpdate:modelValue":t[10]||(t[10]=l=>a.value.transformers_max_demand=l),disabled:!a.value.demand_control,style:m(d()),size:"small",controls:!1,max:V.value},null,8,["modelValue","disabled","style","max"]),ce]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.demandUpperLimitCoefficient")},{default:s(()=>[e(c,{modelValue:a.value.demand_upper_limit_coefficient,"onUpdate:modelValue":t[11]||(t[11]=l=>a.value.demand_upper_limit_coefficient=l),disabled:!a.value.demand_control,style:m(d()),size:"small",controls:!1,precision:0,min:10,max:100},null,8,["modelValue","disabled","style"]),ye]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.maxVolSingleCellThreshold")},{default:s(()=>[e(c,{modelValue:a.value.max_volt_single_cell_threshold,"onUpdate:modelValue":t[12]||(t[12]=l=>a.value.max_volt_single_cell_threshold=l),style:m(d()),size:"small",controls:!1,precision:3,max:100},null,8,["modelValue","style"]),fe]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.minVolSingleCellThreshold")},{default:s(()=>[e(c,{modelValue:a.value.min_volt_single_cell_threshold,"onUpdate:modelValue":t[13]||(t[13]=l=>a.value.min_volt_single_cell_threshold=l),style:m(d()),size:"small",controls:!1,precision:3,max:100},null,8,["modelValue","style"]),ve]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.tempUpperLimit")},{default:s(()=>[e(c,{modelValue:a.value.temp_upper_limit,"onUpdate:modelValue":t[14]||(t[14]=l=>a.value.temp_upper_limit=l),style:m(d()),size:"small",controls:!1,precision:0,max:100},null,8,["modelValue","style"]),ge]),_:1},8,["label"])]),_:1})]),_:1}),be,r("p",Ve,z(o(n)("strategy.auxiliaryParam")),1),e(S,null,{default:s(()=>[e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.maxDisChargePower")},{default:s(()=>[e(c,{modelValue:a.value.max_discharge_power,"onUpdate:modelValue":t[15]||(t[15]=l=>a.value.max_discharge_power=l),style:m(d()),size:"small",controls:!1,precision:0,max:V.value},null,8,["modelValue","style","max"]),xe]),_:1},8,["label"])]),_:1}),e(i,{span:_},{default:s(()=>[e(u,{label:o(n)("strategy.maxChargePower")},{default:s(()=>[e(c,{modelValue:a.value.max_charging_power,"onUpdate:modelValue":t[16]||(t[16]=l=>a.value.max_charging_power=l),style:m(d()),size:"small",controls:!1,precision:0,max:V.value},null,8,["modelValue","style","max"]),we]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1},8,["model"])}}}),ke=ae(he,[["__scopeId","data-v-ba3a77c4"]]);export{ke as default};
