var $=(ee,ae,l)=>new Promise((Y,y)=>{var F=w=>{try{B(l.next(w))}catch(q){y(q)}},H=w=>{try{B(l.throw(w))}catch(q){y(q)}},B=w=>w.done?Y(w.value):Promise.resolve(w.value).then(F,H);B((l=l.apply(ee,ae)).next())});import{d as Se,l as Ce,r as b,c as J,p as Q,a as X,o as d,b as f,f as O,e as i,u as S,w as o,F as M,i as I,t as _,y as C,g as m,N as we,q as T,W as me,_ as Oe}from"./index-BSlF4gO8.js";import{T as E}from"./index-Ca9jcqXW.js";import{C as Pe}from"./cluster-JMpJuoxf.js";import{r as Ve}from"./pack-C-9XZzM4.js";import{r as Ne}from"./meter-CmXvhCrg.js";import{A as Be}from"./ac-CthUNdyo.js";import{v as R}from"./valueUtil-BReNmlgC.js";const qe={width:24,height:24,body:'<path fill="currentColor" d="M8 7v4L2 6l6-5v4h5a8 8 0 1 1 0 16H4v-2h9a6 6 0 0 0 0-12H8Z"/>'},$e={class:"breadcrumb-container"},Ae={class:"breadcrumb-container-left"},Me={key:0,class:"breadcrumb-container-left-title"},Ie={class:"el-dropdown-link"},We={key:1,class:"breadcrumb-container-left-split"},je={key:2,class:"breadcrumb-container-left-title"},xe={class:"el-dropdown-link"},De={key:3,class:"breadcrumb-container-left-split"},Je={key:4,class:"breadcrumb-container-left-title"},Te={class:"el-dropdown-link"},Le={key:5,class:"breadcrumb-container-left-split"},Ee={key:6,class:"breadcrumb-container-left-title"},Fe={class:"el-dropdown-link"},He={key:7,class:"breadcrumb-container-left-split"},Ue={key:8,class:"breadcrumb-container-left-title"},Ze={class:"el-dropdown-link"},ze={key:9,class:"breadcrumb-container-left-split"},Ge={key:10,class:"breadcrumb-container-left-title"},Ke={class:"el-dropdown-link"},Qe={key:11,class:"breadcrumb-container-left-split"},Xe={key:12,class:"breadcrumb-container-left-title"},Ye={class:"el-dropdown-link"},Re={key:13,class:"breadcrumb-container-left-extra-text"},ea={class:"breadcrumb-container-right"},aa={class:"breadcrumb-container-right-item-label"},la={class:"breadcrumb-container-right-item-value"},ta={key:0,class:"breadcrumb-container-right-item-unit"},v=!1,ua=Se({name:"BreadcrumbSelect",__name:"index",props:{defaultCabinet:{},defaultPcs:{type:[Object,Boolean],default:!1},defaultMeter:{type:[Object,Boolean],default:!1},defaultAc:{type:[Object,Boolean],default:!1},defaultStack:{type:[Object,Boolean],default:!0},defaultCluster:{type:[Object,Boolean],default:!0},defaultPack:{type:[Object,Boolean],default:!0},extraText:{},rightList:{}},emits:["onChange","onBackClicked"],setup(ee,{emit:ae}){const l=ee,Y=ae,{t:y}=Ce(),F=b([{label:1,value:1}]),H=b([{label:1,value:1}]),B=b([]),w=b([]),q=b([]),A=b([]),L=b([]),W=b(null),j=b(null),P=b(null),V=b(null),h=b(null),k=b(null),N=b(null),_e=b(!1),ye=b(!1),re=b(!1),ce=b(!1),le=b(!1),ne=b(!1),se=b(!1),U=b({});let te=[],Z=[],z=[],G=[];const x=(n,r,p)=>{switch(n){case"cabinet":W.value=r;break;case"pcs":j.value=r;break;case"meter":P.value=r;break;case"ac":V.value=r;break;case"stack":h.value=r;break;case"cluster":k.value=r;break;case"pack":N.value=r;break}};function D(n,r){switch(n){case"cabinet":_e.value=r;break;case"stack":le.value=r;break;case"pcs":ye.value=r;break;case"meter":re.value=r;break;case"ac":ce.value=r;break;case"cluster":ne.value=r;break;case"pack":se.value=r;break}}const he=J(()=>!!F.value.length&&!!W.value),oe=J(()=>!!H.value.length&&!!j.value&&(typeof l.defaultPcs!="boolean"||l.defaultPcs)),de=J(()=>!!B.value.length&&!!P.value&&(typeof l.defaultMeter!="boolean"||l.defaultMeter)),ie=J(()=>!!w.value.length&&!!V.value&&(typeof l.defaultAc!="boolean"||l.defaultAc)),fe=J(()=>!!q.value.length&&!!h.value&&(typeof l.defaultStack!="boolean"||l.defaultStack)),ve=J(()=>!!A.value.length&&!!k.value&&(typeof l.defaultCluster!="boolean"||l.defaultCluster)),be=J(()=>!!L.value.length&&!!N.value&&(typeof l.defaultPack!="boolean"||l.defaultPack)),pe=n=>{var p;if(!n||!`${n==null?void 0:n.label}`||!`${n==null?void 0:n.value}`)return;const r=(p=U.value[`${n.label}`])==null?void 0:p.clusters;r&&(A.value=Object.keys(r).map(c=>({label:parseInt(c),value:parseInt(c)})),k.value!=null&&!A.value.some(c=>{var e,t;return(c==null?void 0:c.label)==((e=k.value)==null?void 0:e.label)&&(c==null?void 0:c.value)==((t=k.value)==null?void 0:t.value)})&&A.value.length>0&&(k.value=A.value[0]))},K=me(()=>{var n,r,p,c,e,t,u;Y("onChange",{cabinet:(n=W.value)==null?void 0:n.value,pcs:(r=j.value)==null?void 0:r.value,meter:(p=P.value)==null?void 0:p.value,ac:(c=V.value)==null?void 0:c.value,stack:(e=h.value)==null?void 0:e.value,cluster:(t=k.value)==null?void 0:t.value,pack:(u=N.value)==null?void 0:u.value})},500,!1),ge=()=>$(this,null,function*(){var n,r,p;if(!(typeof l.defaultStack=="boolean"&&l.defaultStack==!1))try{const c=yield Pe.requestAllClusters();(c==null?void 0:c.code)==200&&JSON.stringify((r=(n=c==null?void 0:c.data)==null?void 0:n.batteryCluster)!=null?r:[])!=JSON.stringify(te)&&(te=(p=c==null?void 0:c.data)==null?void 0:p.batteryCluster,U.value={},te.forEach(e=>{var a,s;const t=R.roundString(e.StackNo),u=(s=(a=U.value[t])==null?void 0:a.clusters)!=null?s:{};u[R.roundString(e.ClusterNo)]=e,U.value[t]={clusters:u}}),q.value=Object.keys(U.value).map(e=>({label:R.round(parseInt(e)),value:R.round(parseInt(e))})),!h.value&&typeof l.defaultStack!="boolean"&&l.defaultStack&&q.value.some(e=>{var t,u;return(e==null?void 0:e.label)==((t=l.defaultStack)==null?void 0:t.label)&&(e==null?void 0:e.value)==((u=l.defaultStack)==null?void 0:u.value)})?h.value=l.defaultStack:q.value.some(e=>{var t,u;return(e==null?void 0:e.label)==((t=h.value)==null?void 0:t.label)&&(e==null?void 0:e.value)==((u=h.value)==null?void 0:u.value)})||(h.value=q.value[0]),typeof l.defaultCluster=="boolean"&&l.defaultCluster==!1||(pe(h.value),!k.value&&typeof l.defaultCluster!="boolean"&&l.defaultCluster&&A.value.some(e=>{var t,u;return(e==null?void 0:e.label)==((t=l.defaultCluster)==null?void 0:t.label)&&(e==null?void 0:e.value)==((u=l.defaultCluster)==null?void 0:u.value)})?k.value=l.defaultCluster:A.value.some(e=>{var t,u;return(e==null?void 0:e.label)==((t=k.value)==null?void 0:t.label)&&(e==null?void 0:e.value)==((u=k.value)==null?void 0:u.value)})||(k.value=A.value[0])),yield ue(h.value.value,k.value.value))}catch(c){}});$(this,null,function*(){var n,r,p,c;if(!(typeof l.defaultMeter=="boolean"&&l.defaultMeter==!1))try{const e=yield Ne();(e==null?void 0:e.code)==200&&JSON.stringify((r=(n=e==null?void 0:e.data)==null?void 0:n.energyMeterCard)!=null?r:[])!=JSON.stringify(z)&&(z=(p=e==null?void 0:e.data)==null?void 0:p.energyMeterCard,B.value=(c=z==null?void 0:z.map((t,u)=>({label:u+1,value:u+1})))!=null?c:[],!P.value&&typeof l.defaultMeter!="boolean"&&l.defaultMeter&&B.value.some(t=>{var u,a;return t.label==((u=l.defaultMeter)==null?void 0:u.label)&&t.value==((a=l.defaultMeter)==null?void 0:a.value)})?P.value=l.defaultMeter:B.value.some(t=>{var u,a;return(t==null?void 0:t.label)==((u=P.value)==null?void 0:u.label)&&(t==null?void 0:t.value)==((a=P.value)==null?void 0:a.value)})||(P.value=B.value[0]))}catch(e){}}),$(this,null,function*(){var n,r,p,c;if(!(typeof l.defaultAc=="boolean"&&l.defaultAc==!1))try{const e=yield Be.requestAllAcs();(e==null?void 0:e.code)==200&&JSON.stringify((r=(n=e==null?void 0:e.data)==null?void 0:n.airConditionerCard)!=null?r:[])!=JSON.stringify(G)&&(G=(p=e==null?void 0:e.data)==null?void 0:p.airConditionerCard,w.value=(c=G==null?void 0:G.map((t,u)=>({label:u+1,value:u+1})))!=null?c:[],!V.value&&typeof l.defaultAc!="boolean"&&l.defaultAc&&w.value.some(t=>{var u,a;return t.label==((u=l.defaultAc)==null?void 0:u.label)&&t.value==((a=l.defaultAc)==null?void 0:a.value)})?V.value=l.defaultAc:w.value.some(t=>{var u,a;return(t==null?void 0:t.label)==((u=V.value)==null?void 0:u.label)&&(t==null?void 0:t.value)==((a=V.value)==null?void 0:a.value)})||(V.value=w.value[0]))}catch(e){}});const ue=(n,r)=>$(this,null,function*(){var p,c,e,t;if(!(typeof l.defaultPack=="boolean"&&l.defaultPack==!1||!n||!r))try{const u=yield Ve(n,r);(u==null?void 0:u.code)==200&&JSON.stringify((c=(p=u==null?void 0:u.data)==null?void 0:p.cellVolt)!=null?c:[])!=JSON.stringify(Z)&&(Z=(e=u==null?void 0:u.data)==null?void 0:e.cellVolt,L.value=(t=Z==null?void 0:Z.map((a,s)=>({label:s+1,value:s+1})))!=null?t:[],!N.value&&typeof l.defaultPack!="boolean"&&l.defaultPack&&L.value.some(a=>{var s,g;return a.label==((s=l.defaultPack)==null?void 0:s.label)&&a.value==((g=l.defaultPack)==null?void 0:g.value)})?N.value=l.defaultPack:L.value.some(a=>{var s,g;return(a==null?void 0:a.label)==((s=N.value)==null?void 0:s.label)&&(a==null?void 0:a.value)==((g=N.value)==null?void 0:g.value)})||(N.value=L.value[0]))}catch(u){}});return(()=>{!W.value&&typeof l.defaultCabinet!="boolean"&&l.defaultCabinet?W.value=l.defaultCabinet:W.value=F.value[0],!j.value&&typeof l.defaultPcs!="boolean"&&l.defaultPcs?j.value=l.defaultPcs:j.value=H.value[0]})(),Q(()=>h,()=>$(this,null,function*(){var n;h.value&&(pe(h.value),k.value&&(yield ue(h.value.value,(n=k.value)==null?void 0:n.value)),K())}),{deep:!0}),Q(()=>k,()=>$(this,null,function*(){var n;k.value&&(yield ue(h.value.value,(n=k.value)==null?void 0:n.value),K())}),{deep:!0}),Q(()=>N,()=>$(this,null,function*(){N.value&&K()}),{deep:!0}),Q(()=>P,()=>$(this,null,function*(){P.value&&K()}),{deep:!0}),Q(()=>V,()=>$(this,null,function*(){V.value&&K()}),{deep:!0}),ge(),(n,r)=>{const p=X("IconifyIconOffline"),c=X("el-dropdown-item"),e=X("el-dropdown-menu"),t=X("el-dropdown"),u=X("el-icon");return d(),f("div",$e,[O("div",Ae,[O("div",{class:"breadcrumb-container-left-icon",onClick:r[0]||(r[0]=a=>Y("onBackClicked"))},[i(p,{icon:S(qe),class:"text-[16px]"},null,8,["icon"])]),he.value?(d(),f("span",Me,[i(t,{trigger:"click",disabled:!0,"popper-class":"breadcrumb-container-left-title-popper-class",class:"breadcrumb-container-left-title-select",onVisibleChange:r[1]||(r[1]=a=>D("cabinet",a))},{dropdown:o(()=>[i(e,null,{default:o(()=>[(d(!0),f(M,null,I(F.value,(a,s)=>(d(),T(c,{key:s,onClick:g=>x("cabinet",a,s)},{default:o(()=>[m(_(S(y)("cluster.detail.breadcrumb.cabinet",{number:a.value})),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:o(()=>[O("span",Ie,_(S(y)("cluster.detail.breadcrumb.cabinet",{number:W.value.value})),1)]),_:1})])):C("",!0),oe.value?(d(),f("span",We,"/")):C("",!0),oe.value?(d(),f("span",je,[i(t,{trigger:"click","popper-class":"breadcrumb-container-left-title-popper-class",class:"breadcrumb-container-left-title-select",onVisibleChange:r[2]||(r[2]=a=>D("pcs",a))},{dropdown:o(()=>[i(e,null,{default:o(()=>[(d(!0),f(M,null,I(H.value,(a,s)=>(d(),T(c,{key:s,onClick:g=>x("pcs",a,s)},{default:o(()=>[m(_(S(y)("cluster.detail.breadcrumb.pcs",{number:a.value})),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:o(()=>[O("span",xe,[m(_(S(y)("cluster.detail.breadcrumb.pcs",{number:j.value.value}))+" ",1),i(u,{class:"el-icon--right"},{default:o(()=>[i(E,{rotate:le.value?180:0},null,8,["rotate"])]),_:1})])]),_:1})])):C("",!0),de.value?(d(),f("span",De,"/")):C("",!0),de.value?(d(),f("span",Je,[i(t,{trigger:"click","popper-class":"breadcrumb-container-left-title-popper-class",class:"breadcrumb-container-left-title-select",onVisibleChange:r[3]||(r[3]=a=>D("meter",a))},{dropdown:o(()=>[i(e,null,{default:o(()=>[(d(!0),f(M,null,I(B.value,(a,s)=>(d(),T(c,{key:s,onClick:g=>x("meter",a,s)},{default:o(()=>[m(_(S(y)("cluster.detail.breadcrumb.meter",{number:a.value})),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:o(()=>[O("span",Te,[m(_(S(y)("cluster.detail.breadcrumb.meter",{number:P.value.value}))+" ",1),i(u,{class:"el-icon--right"},{default:o(()=>[i(E,{rotate:re.value?180:0},null,8,["rotate"])]),_:1})])]),_:1})])):C("",!0),ie.value?(d(),f("span",Le,"/")):C("",!0),ie.value?(d(),f("span",Ee,[i(t,{trigger:"click","popper-class":"breadcrumb-container-left-title-popper-class",class:"breadcrumb-container-left-title-select",onVisibleChange:r[4]||(r[4]=a=>D("ac",a))},{dropdown:o(()=>[i(e,null,{default:o(()=>[(d(!0),f(M,null,I(w.value,(a,s)=>(d(),T(c,{key:s,onClick:g=>x("ac",a,s)},{default:o(()=>[m(_(S(y)("cluster.detail.breadcrumb.ac",{number:a.value})),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:o(()=>[O("span",Fe,[m(_(S(y)("cluster.detail.breadcrumb.ac",{number:V.value.value}))+" ",1),i(u,{class:"el-icon--right"},{default:o(()=>[i(E,{rotate:ce.value?180:0},null,8,["rotate"])]),_:1})])]),_:1})])):C("",!0),fe.value?(d(),f("span",He,"/")):C("",!0),fe.value?(d(),f("span",Ue,[i(t,{trigger:"click","popper-class":"breadcrumb-container-left-title-popper-class",class:"breadcrumb-container-left-title-select",onVisibleChange:r[5]||(r[5]=a=>D("stack",a))},{dropdown:o(()=>[i(e,null,{default:o(()=>[(d(!0),f(M,null,I(q.value,(a,s)=>(d(),T(c,{key:s,onClick:g=>x("stack",a,s)},{default:o(()=>[m(_(S(y)("cluster.detail.breadcrumb.stack",{number:a.value})),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:o(()=>[O("span",Ze,[m(_(S(y)("cluster.detail.breadcrumb.stack",{number:h.value.value}))+" ",1),i(u,{class:"el-icon--right"},{default:o(()=>[i(E,{rotate:le.value?180:0},null,8,["rotate"])]),_:1})])]),_:1})])):C("",!0),ve.value?(d(),f("span",ze,"/")):C("",!0),ve.value?(d(),f("span",Ge,[i(t,{trigger:"click","popper-class":"breadcrumb-container-left-title-popper-class",class:"breadcrumb-container-left-title-select",onVisibleChange:r[6]||(r[6]=a=>D("cluster",a))},{dropdown:o(()=>[i(e,null,{default:o(()=>[(d(!0),f(M,null,I(A.value,(a,s)=>(d(),T(c,{key:s,onClick:g=>x("cluster",a,s)},{default:o(()=>[m(_(S(y)("cluster.detail.breadcrumb.cluster",{number:a.value})),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:o(()=>[O("span",Ke,[m(_(S(y)("cluster.detail.breadcrumb.cluster",{number:k.value.value}))+" ",1),i(u,{class:"el-icon--right"},{default:o(()=>[i(E,{rotate:ne.value?180:0},null,8,["rotate"])]),_:1})])]),_:1})])):C("",!0),be.value?(d(),f("span",Qe,"/")):C("",!0),be.value?(d(),f("span",Xe,[i(t,{trigger:"click","popper-class":"breadcrumb-container-left-title-popper-class",class:"breadcrumb-container-left-title-select",onVisibleChange:r[7]||(r[7]=a=>D("pack",a))},{dropdown:o(()=>[i(e,null,{default:o(()=>[(d(!0),f(M,null,I(L.value,(a,s)=>(d(),T(c,{key:s,onClick:g=>x("pack",a,s)},{default:o(()=>[m(_(S(y)("cluster.detail.breadcrumb.pack",{number:a.value})),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:o(()=>[O("span",Ye,[m(_(S(y)("cluster.detail.breadcrumb.pack",{number:N.value.value}))+" ",1),i(u,{class:"el-icon--right"},{default:o(()=>[i(E,{rotate:se.value?180:0},null,8,["rotate"])]),_:1})])]),_:1})])):C("",!0),l.extraText?(d(),f("span",Re,_(l.extraText),1)):C("",!0)]),O("div",ea,[(d(!0),f(M,null,I(l.rightList||[],(a,s)=>{var g,ke;return d(),f("div",{key:s,class:"breadcrumb-container-right-item"},[O("span",aa,_(a.label),1),O("span",la,_(((g=a.value)==null?void 0:g.indexOf("undefined"))==-1?a.value:"--"),1),a.unit&&((ke=a.value)==null?void 0:ke.indexOf("undefined"))==-1?(d(),f("span",ta,_(a.unit),1)):C("",!0)])}),128))]),we(n.$slots,"default",{},void 0,!0)])}}}),ka=Oe(ua,[["__scopeId","data-v-246fae91"]]);export{ka as B};
