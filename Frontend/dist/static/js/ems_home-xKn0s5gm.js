var y=(w,s,c)=>new Promise((f,d)=>{var l=u=>{try{o(c.next(u))}catch(h){d(h)}},v=u=>{try{o(c.throw(u))}catch(h){d(h)}},o=u=>u.done?f(u.value):Promise.resolve(u.value).then(l,v);o((c=c.apply(w,s)).next())});import{I as r}from"./index-CGgGq9hQ.js";import{I as m}from"./icontype-CrdMeA1p.js";import{D as J}from"./index-D9CJN52I.js";import{h as Q,a as R,b as W,g as X}from"./home-CupL7yhu.js";import Y from"./homeCabinet-CHP8ndKX.js";import{d as Z,j as ee,K as te,r as b,x as C,G as le,a as T,L as ae,M as se,o as p,c as M,b as e,s as ne,m as _,u as t,t as a,e as n,f as i,w as z,F as oe,n as ce,z as ie,_ as ue}from"./index-B378b16y.js";import{u as re}from"./useTimer-u5e-KjxW.js";import"./icon-power-off-DaFr1WKX.js";import"./comInterrupt-0m6mzMWM.js";import"./mitt-E5P-NQ8u.js";import"./index.vue_vue_type_script_setup_true_lang-60eETwKU.js";import"./index-C7yWB1xI.js";import"./hooks-DHRyCiWW.js";import"./arrow-right-bold-DCPknizU.js";const me={class:"home"},de={class:"header dark:!text-white flex items-center justify-between h-[48px]"},ve={class:"header-left flex items-center"},pe={class:"ml-[4px]"},he={class:"header-right flex items-center"},xe={class:"content"},_e={class:"content-left"},fe={class:"flex"},ge={class:"flex flex-col flex-1"},ye={class:"flex flex-col flex-1"},be={class:"flex flex-col flex-1"},Ce={class:"mb-[14px]"},Te={class:"title dark:!text-white"},we={class:"fault flex mb-[8px]"},Ne={class:"flex flex-col text-center flex-1 mr-[8px]"},Se={class:"h-[24px] bg-cyan-100 text-green-500"},ke={class:"h-[28px] dark:!text-white"},De={class:"flex flex-col text-center flex-1 mr-[8px]"},Ie={class:"h-[24px] bg-indigo-200 text-blue-800"},Ee={class:"h-[28px] dark:!text-white"},Pe={class:"flex flex-col text-center flex-1"},Be={class:"h-[24px] bg-cyan-100 text-green-500"},He={class:"h-[28px] dark:!text-white"},Ue={class:"fault flex"},$e={class:"flex flex-col text-center flex-1 mr-[8px]"},Ae={class:"h-[24px] bg-red-200 text-red-600"},je={class:"h-[28px] dark:!text-white"},Oe={class:"flex flex-col text-center flex-1 mr-[8px]"},Le={class:"h-[24px] bg-amber-200 text-yellow-600"},Me={class:"h-[28px] dark:!text-white"},ze={class:"flex flex-col text-center flex-1"},Fe={class:"h-[24px] bg-amber-200 text-yellow-600"},Ve={class:"h-[28px] dark:!text-white"},Ge={class:"content-right"},Ke={class:"flex justify-center items-center h-full"},qe=["onClick"],Je=Z({name:"EmsHome",__name:"ems_home",setup(w){const{t:s}=ee(),{$f:c,$axiosCancel:f}=te(),d=b(!0),l=b({}),v=b(16),o=C(()=>v.value<=2?24:v.value<=4?12:v.value<=9?8:v.value<=16?6:4),u=C(()=>o.value===4?"10px":o.value===6?"28px":o.value===8?"42px":"50px"),h=C(()=>o.value===4?"scale(0.8)":o.value===6?"scale(1)":o.value===8?"scale(1.2)":"scale(1.5)"),F=x=>{},N=()=>y(this,null,function*(){f("/lcmain?type=homePageInfo");const x=yield X();x.code===200&&(l.value=x.data)});return re(()=>{d.value=!1,N()}),le(()=>y(this,null,function*(){d.value=!0,yield N(),d.value=!1})),(x,Qe)=>{var S,k,D,I,E,P,B,H,U,$,A,j,O,L;const V=T("el-divider"),G=T("el-col"),K=T("el-row"),q=ae("load");return se((p(),M("div",me,[e("div",de,[e("div",ve,[e("span",{class:ne(["standstill flex items-center",{charge:l.value.State===1,discharge:l.value.State===2}])},[l.value.State===0?(p(),_(t(Q),{key:0})):l.value.State===1?(p(),_(t(R),{key:1})):(p(),_(t(W),{key:2})),e("span",pe,a(t(s)(`common.${l.value.State===0?"standstill":l.value.State===1?"charge":"discharge"}`)),1)],2)]),e("div",he,[e("div",null,[n(a(t(s)("home.energyStorage"))+" ",1),e("span",null,[n(" ("),e("span",null,a((S=l.value.CabinetCurrentNum)!=null?S:0),1),n("/"+a((k=l.value.CabinetTotalNum)!=null?k:0)+") ",1)])]),e("div",null,[n(" PCS "),e("span",null,[n(" ("),e("span",null,a((D=l.value.PcsCurrentNum)!=null?D:0),1),n("/"+a((I=l.value.PcsTotalNum)!=null?I:0)+") ",1)])]),e("div",null,[n(a(t(s)("common.batteryStack"))+" ",1),e("span",null,[n(" ("),e("span",null,a((E=l.value.BatteryStackCurrentNum)!=null?E:0),1),n("/"+a((P=l.value.BatteryStackTotalNum)!=null?P:0)+") ",1)])]),e("div",null,[n(a(t(s)("common.batteryCluster"))+" ",1),e("span",null,[n(" ("),e("span",null,a((B=l.value.BatteryClusterCurrentNum)!=null?B:0),1),n("/"+a((H=l.value.BatteryClusterTotalNum)!=null?H:0)+") ",1)])]),e("div",null,[n(a(t(s)("common.ac"))+" ",1),e("span",null,[n(" ("),e("span",null,a((U=l.value.AirCurrentNum)!=null?U:0),1),n("/"+a(($=l.value.AirTotalNum)!=null?$:0)+") ",1)])]),e("div",null,[n(a(t(s)("common.meter"))+" ",1),e("span",null,[n(" ("),e("span",null,a((A=l.value.MeterCurrentNum)!=null?A:0),1),n("/"+a((j=l.value.MeterTotalNum)!=null?j:0)+") ",1)])]),e("div",null,[n(a(t(s)("deviceInfo.tempAndHumidityInfo"))+" ",1),e("span",null,[n(" ("),e("span",null,a((O=l.value.TempHumiCurrentNum)!=null?O:0),1),n("/"+a((L=l.value.TempHumiTotalNum)!=null?L:0)+") ",1)])])])]),e("div",xe,[e("div",_e,[e("div",fe,[e("div",ge,[i(r,{class:"mb-[14px]",label:"SOC",value:`${t(c).num(l.value.SOC,1)}%`,iconType:t(m).soc},null,8,["value","iconType"]),i(r,{class:"mb-[14px]",label:"SOH",value:`${t(c).num(l.value.SOH,1)}%`,iconType:t(m).soh},null,8,["value","iconType"]),i(r,{class:"mb-[4px]",label:"PCS","value-unit":t(c).powerUnit(l.value.PcsActivePower,{num:2,flag:2}),iconType:t(m).pcs},null,8,["value-unit","iconType"])]),e("div",ye,[i(r,{class:"mb-[14px]",label:t(s)("home.todayChargeEnergy"),"value-unit":t(c).energyUnit(l.value.TodayCharge,{num:1,flag:2}),iconType:t(m).chargeEnergy},null,8,["label","value-unit","iconType"]),i(r,{class:"mb-[14px]",label:t(s)("home.todayDischargeEnergy"),"value-unit":t(c).energyUnit(l.value.TodayDischarge,{num:1,flag:2}),iconType:t(m).dischargeEnergy},null,8,["label","value-unit","iconType"]),i(r,{class:"mb-[4px]",label:t(s)("common.grid"),"value-unit":t(c).powerUnit(l.value.GridActivePower,{num:2,flag:2}),iconType:t(m).grid},null,8,["label","value-unit","iconType"])]),e("div",be,[i(r,{class:"mb-[14px]",label:t(s)("common.totalChargeEnergy"),"value-unit":t(c).energyUnit(l.value.CumulativeCharge,{num:2,flag:2}),iconType:t(m).totalChargeEnergy},null,8,["label","value-unit","iconType"]),i(r,{class:"mb-[14px]",label:t(s)("common.totalDischargeEnergy"),"value-unit":t(c).energyUnit(l.value.CumulativeDischarge,{num:2,flag:2}),iconType:t(m).totalDischargeEnergy},null,8,["label","value-unit","iconType"]),i(r,{class:"mb-[4px]",label:t(s)("common.load"),"value-unit":t(c).powerUnit(l.value.LoadActivePower,{num:2,flag:2}),iconType:t(m).load},null,8,["label","value-unit","iconType"])])]),i(V,{class:"!my-[12px]"}),e("div",Ce,[e("div",Te,a(t(s)("home.cabinetStateNum")),1),e("div",we,[e("div",Ne,[e("span",Se,a(t(s)("common.charge")),1),e("span",ke,a(l.value.DeviceChargeNum),1)]),e("div",De,[e("span",Ie,a(t(s)("common.discharge")),1),e("span",Ee,a(l.value.DeviceDischargeNum),1)]),e("div",Pe,[e("span",Be,a(t(s)("common.standby")),1),e("span",He,a(l.value.DeviceStandbyNum),1)])]),e("div",Ue,[e("div",$e,[e("span",Ae,a(t(s)("common.fault")),1),e("span",je,a(l.value.DeviceFaultNum),1)]),e("div",Oe,[e("span",Le,a(t(s)("common.comInterrupt")),1),e("span",Me,a(l.value.DeviceInterruptNum),1)]),e("div",ze,[e("span",Fe,a(t(s)("common.shutdown")),1),e("span",Ve,a(l.value.DeviceShutdownNum),1)])])]),i(J,{title:t(s)("stack.energyCurve"),"module-name":"ems_home"},null,8,["title"])]),e("div",Ge,[e("div",Ke,[i(K,null,{default:z(()=>[(p(!0),M(oe,null,ce(v.value,g=>(p(),_(G,{key:g,xs:o.value,sm:o.value,md:o.value,lg:o.value,xl:o.value},{default:z(()=>[e("div",{class:"flex justify-center items-center cabinet-item",onClick:Re=>F(g)},[e("div",{class:"cabinet-name",style:ie({top:u.value,transform:h.value})},a(t(s)("home.energyStorage"))+"#"+a(g),5),i(Y)],8,qe)]),_:2},1032,["xs","sm","md","lg","xl"]))),128))]),_:1})])])])])),[[q,d.value]])}}}),mt=ue(Je,[["__scopeId","data-v-7a2328a1"]]);export{mt as default};
