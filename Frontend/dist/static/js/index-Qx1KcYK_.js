var S=(d,g,l)=>new Promise((_,x)=>{var p=n=>{try{i(l.next(n))}catch(h){x(h)}},u=n=>{try{i(l.throw(n))}catch(h){x(h)}},i=n=>n.done?_(n.value):Promise.resolve(n.value).then(p,u);i((l=l.apply(d,g)).next())});import{o as r,c as m,g as w,d as T,i as A,j as V,r as E,a as v,m as y,w as M,b as t,u as s,y as f,f as k,n as N,F as z,s as C,t as a,e as P,B as F,C as Z,_ as j}from"./index-B378b16y.js";import{C as D}from"./cluster-DKWQwuWS.js";import O from"./index-CAZyMmeb.js";import{u as B}from"./useTimer-u5e-KjxW.js";import{v as o}from"./valueUtil-BReNmlgC.js";import"./WarningsUtil-CTO3mp7U.js";import"./icon-settings-B7co2eUu.js";const q={xmlns:"http://www.w3.org/2000/svg",width:"88",height:"90"},H=w('<defs><linearGradient id="a" x1="50%" x2="50%" y1="42.96%" y2="100%"><stop offset="0%" stop-color="#1E3EA2"></stop><stop offset="100%" stop-color="#1E3EA2" stop-opacity="0"></stop></linearGradient></defs><g fill="none" fill-rule="evenodd"><g opacity=".6"><path stroke="url(#a)" d="M52 .5c.966 0 1.841.392 2.475 1.025A3.5 3.5 0 0 1 55.5 4v82c0 .966-.392 1.841-1.025 2.475A3.5 3.5 0 0 1 52 89.5H4a3.5 3.5 0 0 1-2.475-1.025A3.5 3.5 0 0 1 .5 86V4c0-.966.392-1.841 1.025-2.475A3.5 3.5 0 0 1 4 .5Z" transform="translate(1)"></path><g stroke="#1E3EA2"><path d="M53.5 20.5v11h-49v-11zM53.5 31.5v11h-49v-11z"></path></g><path stroke="#1E3EA2" d="M52 3.5c.414 0 .79.168 1.06.44.272.27.44.646.44 1.06v15.5h-49V5c0-.414.168-.79.44-1.06.27-.272.646-.44 1.06-.44Z"></path><path stroke="#1E3EA2" d="M24.5 6.5v11h-17v-11zM32.5 6.5v11h-5v-11zM37 6.5c.414 0 .79.168 1.06.44a1.495 1.495 0 0 1 0 2.121c-.27.271-.646.439-1.06.439s-.79-.168-1.06-.44A1.5 1.5 0 0 1 35.5 8c0-.414.168-.79.44-1.06.27-.272.646-.44 1.06-.44ZM43 6.5c.414 0 .79.168 1.06.44a1.495 1.495 0 0 1 0 2.121c-.27.271-.646.439-1.06.439s-.79-.168-1.06-.44A1.5 1.5 0 0 1 41.5 8c0-.414.168-.79.44-1.06.27-.272.646-.44 1.06-.44ZM49 6.5c.414 0 .79.168 1.06.44a1.495 1.495 0 0 1 0 2.121c-.27.271-.646.439-1.06.439s-.79-.168-1.06-.44A1.5 1.5 0 0 1 47.5 8c0-.414.168-.79.44-1.06.27-.272.646-.44 1.06-.44Z"></path><g stroke="#1E3EA2"><path stroke-opacity=".8" d="M53.5 42.5v11h-49v-11z"></path><path stroke-opacity=".6" d="M53.5 53.5v11h-49v-11z"></path><path stroke-opacity=".4" d="M53.5 64.5v11h-49v-11z"></path><path d="M53.5 75.5v11h-49v-11z" opacity=".2"></path></g></g><path fill="#FFF" d="M32-2h54a3 3 0 0 1 3 3v86a3 3 0 0 1-3 3H32a3 3 0 0 1-3-3V1a3 3 0 0 1 3-3"></path><path stroke="url(#a)" d="M52 .5c.966 0 1.841.392 2.475 1.025A3.5 3.5 0 0 1 55.5 4v82c0 .966-.392 1.841-1.025 2.475A3.5 3.5 0 0 1 52 89.5H4a3.5 3.5 0 0 1-2.475-1.025A3.5 3.5 0 0 1 .5 86V4c0-.966.392-1.841 1.025-2.475A3.5 3.5 0 0 1 4 .5Z" transform="translate(31)"></path><g stroke="#1E3EA2"><path d="M83.5 20.5v11h-49v-11zM83.5 31.5v11h-49v-11z"></path></g><path stroke="#1E3EA2" d="M82 3.5c.414 0 .79.168 1.06.44.272.27.44.646.44 1.06v15.5h-49V5c0-.414.168-.79.44-1.06.27-.272.646-.44 1.06-.44Z"></path><path stroke="#1E3EA2" d="M54.5 6.5v11h-17v-11zM62.5 6.5v11h-5v-11zM67 6.5c.414 0 .79.168 1.06.44a1.495 1.495 0 0 1 0 2.121c-.27.271-.646.439-1.06.439s-.79-.168-1.06-.44A1.5 1.5 0 0 1 65.5 8c0-.414.168-.79.44-1.06.27-.272.646-.44 1.06-.44ZM73 6.5c.414 0 .79.168 1.06.44a1.495 1.495 0 0 1 0 2.121c-.27.271-.646.439-1.06.439s-.79-.168-1.06-.44A1.5 1.5 0 0 1 71.5 8c0-.414.168-.79.44-1.06.27-.272.646-.44 1.06-.44ZM79 6.5c.414 0 .79.168 1.06.44a1.495 1.495 0 0 1 0 2.121c-.27.271-.646.439-1.06.439s-.79-.168-1.06-.44A1.5 1.5 0 0 1 77.5 8c0-.414.168-.79.44-1.06.27-.272.646-.44 1.06-.44Z"></path><g stroke="#1E3EA2"><path stroke-opacity=".8" d="M83.5 42.5v11h-49v-11z"></path><path stroke-opacity=".6" d="M83.5 53.5v11h-49v-11z"></path><path stroke-opacity=".4" d="M83.5 64.5v11h-49v-11z"></path><path d="M83.5 75.5v11h-49v-11z" opacity=".2"></path></g></g>',2),I=[H];function $(d,g){return r(),m("svg",q,[...I])}const L={render:$},c=d=>(F("data-v-c3a660d7"),d=d(),Z(),d),G={class:"page-container"},J={class:"grid-container"},U=["onClick"],K={class:"grid-item-header flex items-start"},Q={class:"inline-block"},W={key:0},X={class:"flex flex-1 w-full"},Y={class:"flex flex-[168] justify-center items-end pb-[91px] min-w-[168px] h-full"},R={class:"grid-item-content"},tt={class:"flex justify-between w-full"},st={class:"flex flex-col flex-[3]"},et={class:"grid-item-label"},at={class:"mt-[4px]"},ot={class:"grid-item-value"},nt=c(()=>t("span",{class:"grid-item-unit"},"V",-1)),lt={class:"flex flex-col flex-[3]"},ct={class:"grid-item-label"},it={class:"mt-[4px]"},rt={class:"grid-item-value"},dt=c(()=>t("span",{class:"grid-item-unit"},"A",-1)),_t={class:"flex flex-col flex-[3]"},pt=c(()=>t("span",{class:"grid-item-label"},"SOC",-1)),ut={class:"grid-item-value mt-[4px]"},ht={class:"flex flex-col flex-[3]"},mt=c(()=>t("span",{class:"grid-item-label"},"SOH",-1)),gt={class:"grid-item-value mt-[4px]"},xt={class:"flex justify-between w-full mt-[16px]"},ft={class:"flex flex-[3] flex-col"},vt={class:"grid-item-label"},yt={class:"mt-[4px] flex items-center"},Mt={class:"grid-item-value"},Ct=c(()=>t("span",{class:"grid-item-unit"},"V",-1)),St={class:"grid-item-range"},kt={class:"flex flex-[3] flex-col ml-[20px]"},bt={class:"grid-item-label"},wt={class:"mt-[4px] flex items-center"},Tt={class:"grid-item-value"},At=c(()=>t("span",{class:"grid-item-unit"},"V",-1)),Vt={class:"grid-item-range"},Et={class:"flex justify-between w-full mt-[16px]"},Nt={class:"flex flex-[3] flex-col"},zt={class:"grid-item-label"},Pt={class:"mt-[4px] flex items-center"},Ft={class:"grid-item-value"},Zt={key:0,class:"grid-item-unit"},jt={class:"grid-item-range"},Dt={class:"flex flex-[3] flex-col ml-[20px]"},Ot={class:"grid-item-label"},Bt={class:"mt-[4px] flex items-center"},qt={class:"grid-item-value"},Ht={key:0,class:"grid-item-unit"},It={class:"grid-item-range"},$t={class:"flex justify-between w-full mt-[16px]"},Lt={class:"flex flex-[3] flex-col"},Gt={class:"grid-item-label"},Jt={class:"mt-[4px] flex items-center"},Ut={class:"grid-item-value"},Kt=c(()=>t("span",{class:"grid-item-unit"},"℃",-1)),Qt={class:"flex flex-[3] flex-col ml-[20px]"},Wt={class:"grid-item-label"},Xt={class:"mt-[4px] flex items-center"},Yt={class:"grid-item-value"},Rt=c(()=>t("span",{class:"grid-item-unit"},"℃",-1)),ts={class:"flex justify-between w-full my-[16px]"},ss={class:"flex flex-[3] flex-col"},es={class:"grid-item-label"},as={class:"mt-[4px] flex items-center"},os={class:"grid-item-value"},ns=c(()=>t("span",{class:"grid-item-unit"},"℃",-1)),ls={class:"flex flex-[3] flex-col ml-[20px]"},cs={class:"grid-item-label"},is={class:"mt-[4px] flex items-center"},rs={class:"grid-item-value"},ds=c(()=>t("span",{class:"grid-item-unit"},"℃",-1)),_s={class:"grid-item-communication-container"},ps=T({name:"ClusterList",__name:"index",setup(d){const g=A(),{t:l}=V(),_=E([]),x=()=>S(this,null,function*(){var p,u,i;try{const n=yield D.requestAllClusters();(n==null?void 0:n.code)==200?JSON.stringify((u=(p=n==null?void 0:n.data)==null?void 0:p.batteryCluster)!=null?u:[])!=JSON.stringify(_.value)&&(_.value=(i=n==null?void 0:n.data)==null?void 0:i.batteryCluster):console.warn("--[cluster] requestAllClusters invalid code",n==null?void 0:n.code)}catch(n){console.warn("--[cluster] requestAllClusters error",n==null?void 0:n.message)}});return B(()=>x(),{immediate:!0,immediateCallback:!0}),(p,u)=>{const i=v("el-empty"),n=v("el-col"),h=v("el-row");return r(),y(O,{"active-name":"cluster"},{default:M(()=>[t("div",G,[t("div",J,[_.value.length===0?(r(),y(i,{key:0,description:s(l)("common.noData")},null,8,["description"])):f("",!0),k(h,{type:"flex",class:"flex-wrap",gutter:16},{default:M(()=>[(r(!0),m(z,null,N(_.value,(e,b)=>(r(),y(n,{key:b,class:"grid-item-container",xs:12,sm:12,md:12,lg:12,xl:12},{default:M(()=>[t("div",{class:C(["grid-item cursor-pointer",{comOff:!e.TimeoutFlag}]),onClick:us=>s(g).push({path:"/deviceControl/cluster/detail",query:{cabinet:1,stack:s(o).round(e.StackNo),cluster:s(o).round(e.ClusterNo)}})},[t("div",K,[t("span",{class:C(["grid-item-header-state-normal",{"grid-item-header-state-warning":e.FaultState==1},{"grid-item-header-state-fault":e.FaultState==2}])},a(e.FaultState==0?s(l)("common.normal"):e.FaultState==1?s(l)("common.warning"):s(l)("common.fault")),3),t("div",Q,[P(a(s(l)("cluster.itemTitle",{cabinet:1,stack:s(o).round(e.StackNo),cluster:s(o).round(e.ClusterNo)}))+" ",1),s(o).round(e.SystemState)>=0&&s(o).round(e.SystemState)<=3?(r(),m("span",W," （"+a(s(o).round(e.SystemState)===2?s(l)("cluster.statusDescDischarging"):s(o).round(e.SystemState)===1?s(l)("cluster.statusDescCharging"):s(o).round(e.SystemState)===0?s(l)("cluster.statusDescStanding"):"")+"） ",1)):f("",!0)])]),t("div",X,[t("div",Y,[k(s(L),{class:"w-[88px] h-[90px]"})]),t("div",R,[t("div",tt,[t("div",st,[t("span",et,a(s(l)("battery.voltage")),1),t("span",at,[t("span",ot,a(s(o).roundString(e.Voltage,1)),1),nt])]),t("div",lt,[t("span",ct,a(s(l)("battery.current")),1),t("span",it,[t("span",rt,a(s(o).roundString(e.Current,1)),1),dt])]),t("div",_t,[pt,t("span",ut,a(s(o).roundString(e.SOC,1))+"%",1)]),t("div",ht,[mt,t("span",gt,a(s(o).roundString(e.SOH,1))+"%",1)])]),t("div",xt,[t("div",ft,[t("span",vt,a(s(l)("battery.maximumCellVoltage")),1),t("span",yt,[t("span",Mt,a(s(o).roundString(e.MaxCellVoltage,3)),1),Ct,t("span",St,a(s(o).round(e.MaxVoltCellPackNo))+"-"+a(s(o).round(e.MaxVoltCellPosition)),1)])]),t("div",kt,[t("span",bt,a(s(l)("battery.minimumCellVoltage")),1),t("span",wt,[t("span",Tt,a(s(o).roundString(e.MinCellVoltage,3)),1),At,t("span",Vt,a(s(o).round(e.MinVoltCellPackNo))+"-"+a(s(o).round(e.MinVoltCellPosition)),1)])])]),t("div",Et,[t("div",Nt,[t("span",zt,a(s(l)("battery.maximumCellTemperature")),1),t("span",Pt,[t("span",Ft,a(e.MaxCellTemperature==-40?"--":s(o).roundString(e.MaxCellTemperature)),1),e.MaxCellTemperature!=-40?(r(),m("span",Zt,"℃")):f("",!0),t("span",jt,a(s(o).round(e.MaxTempCellPackNo))+"-"+a(s(o).round(e.MaxTempCellPosition)),1)])]),t("div",Dt,[t("span",Ot,a(s(l)("battery.minimumCellTemperature")),1),t("span",Bt,[t("span",qt,a(e.MinCellTemperature==-40?"--":s(o).roundString(e.MinCellTemperature)),1),e.MinCellTemperature!=-40?(r(),m("span",Ht,"℃")):f("",!0),t("span",It,a(s(o).round(e.MinTempCellPackNo))+"-"+a(s(o).round(e.MinTempCellPosition)),1)])])]),t("div",$t,[t("div",Lt,[t("span",Gt,a(s(l)("battery.packPosConnectorMaxTemp")),1),t("span",Jt,[t("span",Ut,a(s(o).roundString(e.PackPosConnectorMaxTemp)),1),Kt])]),t("div",Qt,[t("span",Wt,a(s(l)("battery.packPosConnectorMinTemp")),1),t("span",Xt,[t("span",Yt,a(s(o).roundString(e.PackPosConnectorMinTemp)),1),Rt])])]),t("div",ts,[t("div",ss,[t("span",es,a(s(l)("battery.packNegConnectorMaxTemp")),1),t("span",as,[t("span",os,a(s(o).roundString(e.PackNegConnectorMaxTemp)),1),ns])]),t("div",ls,[t("span",cs,a(s(l)("battery.packNegConnectorMinTemp")),1),t("span",is,[t("span",rs,a(s(o).roundString(e.PackNegConnectorMinTemp)),1),ds])])])])]),t("div",_s,[t("div",{class:C(["grid-item-communication-status-normal",{"grid-item-communication-status-fault":s(o).round(e.TimeoutFlag)==0}])},a(s(o).round(e.TimeoutFlag)==1?s(l)("cluster.communicationNormal"):s(o).round(e.TimeoutFlag)==0?s(l)("cluster.communicationBreak"):""),3)])],10,U)]),_:2},1024))),128))]),_:1})])])]),_:1})}}}),Cs=j(ps,[["__scopeId","data-v-c3a660d7"]]);export{Cs as default};
