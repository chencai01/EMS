var T=(m,t,l)=>new Promise((S,y)=>{var _=r=>{try{d(l.next(r))}catch(f){y(f)}},p=r=>{try{d(l.throw(r))}catch(f){y(f)}},d=r=>r.done?S(r.value):Promise.resolve(r.value).then(_,p);d((l=l.apply(m,t)).next())});import{I as i}from"./index-CGgGq9hQ.js";import{B as A}from"./index-TOYUMokL.js";import{D as M}from"./index-C7yWB1xI.js";import{d as B,j as O,r as D,i as z,v as L,I as W,x as q,o as g,c as x,f as s,u as e,b as a,t as h,z as $,y as Y,F as j,n as E,s as F,m as J,A as H,B as K,C as R,_ as U}from"./index-B378b16y.js";import{I as u}from"./icontype-CrdMeA1p.js";import{I as G}from"./icon-warn-B2hpFNpD.js";import{I as Q}from"./icon-error-D8b2vw6T.js";import{_ as X}from"./ClusterLine.vue_vue_type_script_setup_true_lang-CBaY0h-w.js";import{g as Z,C as ee}from"./cluster-DKWQwuWS.js";import{u as le}from"./useTimer-u5e-KjxW.js";import{v as n}from"./valueUtil-BReNmlgC.js";import{A as te}from"./index-DvNpmiD-.js";import"./index-CbvsTRMa.js";import"./pack-rCzq7zF4.js";import"./meter-nf4_0FAI.js";import"./ac-Dv1xUiln.js";import"./WarningsUtil-CTO3mp7U.js";import"./hooks-DHRyCiWW.js";import"./arrow-right-bold-DCPknizU.js";import"./icon-power-off-DaFr1WKX.js";import"./comInterrupt-0m6mzMWM.js";import"./index.vue_vue_type_script_setup_true_lang-60eETwKU.js";const v=m=>(K("data-v-2d6f38ee"),m=m(),R(),m),ae={class:"detail-container"},se={class:"detail-content flex"},ne={class:"detail-content-left"},ie={class:"detail-content-left-status"},oe={class:"detail-content-left-system-vol"},re=v(()=>a("div",{class:"line-horizontal"},null,-1)),ue={class:"flex w-full"},ce={class:"detail-content-left-system-vol"},de=v(()=>a("div",{class:"line-horizontal"},null,-1)),me={class:"flex w-full"},ve={class:"detail-content-left-system-vol"},pe=v(()=>a("div",{class:"line-horizontal"},null,-1)),fe={class:"flex w-full"},be={class:"detail-content-left-system-vol"},ge=v(()=>a("div",{class:"line-horizontal"},null,-1)),he={class:"flex w-full"},ye={class:"detail-content-left-chart"},_e={class:"detail-content-left-chart-title"},Ce={class:"flex items-center mt-[8px]"},xe={class:"w-full h-[244px]"},Se={class:"detail-content-right-message"},ke={class:"detail-content-right-message-panel"},we={class:"detail-content-right-message-panel-warning-title"},Te=v(()=>a("span",null,"(",-1)),De=v(()=>a("span",null,")",-1)),Ve={key:0,class:"detail-content-right-message-panel-warning-empty"},Pe={class:"detail-content-right-message-panel-warning-scroll-container"},Ie=B({name:"ClusterDetail",__name:"detail",setup(m){const{t}=O(),l=D({}),S=z(),y=L(),{cabinet:_,cluster:p,stack:d}=y.query,r={label:n.stringToNumber(_),value:n.stringToNumber(_)},f={label:n.stringToNumber(d),value:n.stringToNumber(d)},V={label:n.stringToNumber(p),value:n.stringToNumber(p)},k=D(W(new Date).format("YYYY-MM-DD")),P=({cabinet:o,stack:b,cluster:c})=>{},C=q(()=>Z(l.value)),I=()=>T(this,null,function*(){try{const o=yield ee.requestClusterDetail(1,1);(o==null?void 0:o.code)==200?JSON.stringify(o.data)!=JSON.stringify(l.value)&&(l.value=o.data):console.warn("--[cluster detail] requestClusterDetail invalid code",o==null?void 0:o.code)}catch(o){console.warn("--[cluster detail] requestClusterDetail error=",o==null?void 0:o.message)}});return le(()=>I(),{immediate:!0,immediateCallback:!0}),(o,b)=>(g(),x("div",ae,[s(A,{"default-pack":!1,"default-cabinet":r,"default-stack":f,"default-cluster":V,rightList:[{label:e(t)("cluster.detail.actualCapacity"),value:e(n).roundString(l.value.ActualCapacity,1),unit:"Ah"},{label:e(t)("cluster.detail.clusterPacks"),value:l.value.ClusterPackNum+"",unit:e(t)("cluster.detail.pcs")},{label:e(t)("cluster.detail.singlePackTempCollection"),value:l.value.SinglePackTempCollectionNum+"",unit:e(t)("cluster.detail.pcs")},{label:e(t)("cluster.detail.singlePackVoltCollection"),value:l.value.SinglePackVoltCollectionNum+"",unit:e(t)("cluster.detail.pcs")}],onOnChange:P,onOnBackClicked:b[0]||(b[0]=c=>e(S).push("/deviceControl/cluster"))},null,8,["rightList"]),a("div",se,[a("div",ne,[a("div",ie,[s(i,{class:"flex-[128] w-0",label:e(t)("battery.systemState"),value:e(n).round(l.value.SystemState)==2?e(t)("cluster.statusDescDischarging"):e(n).round(l.value.SystemState)==1?e(t)("cluster.statusDescCharging"):e(t)("cluster.statusDescStandby"),iconType:e(n).round(l.value.SystemState)==2?e(u).disCharging:e(n).round(l.value.SystemState)==1?e(u).charging:e(u).standstill},null,8,["label","value","iconType"]),s(i,{class:"flex-[128] w-0",label:"SOC",value:e(n).roundString(l.value.Soc,1)+"%",iconType:e(u).soc},null,8,["value","iconType"]),s(i,{class:"flex-[128] w-0",label:"SOH",value:e(n).roundString(l.value.Soh,1)+"%",iconType:e(u).soh},null,8,["value","iconType"])]),a("div",oe,[s(i,{label:e(t)("battery.systemVoltDifference"),value:e(n).roundString(l.value.SystemVoltDifferential,3),unit:"V","enable-row":!0,"icon-type":e(u).systemVoltDifference},null,8,["label","value","icon-type"]),re,a("div",ue,[s(i,{class:"flex-1",label:e(t)("battery.maximumCellVoltage"),value:e(n).roundString(l.value.MaxCellVolt,3),unit:"V"},null,8,["label","value"]),s(i,{class:"flex-1",label:e(t)("battery.packAndCellPosition"),value:l.value.MaxVoltCellPackNo+" - "+l.value.MaxVoltCellPosition},null,8,["label","value"]),s(i,{class:"flex-1",label:e(t)("battery.minimumCellVoltage"),value:e(n).roundString(l.value.MinCellVolt,3),unit:"V"},null,8,["label","value"]),s(i,{class:"flex-1",label:e(t)("battery.packAndCellPosition"),value:l.value.MinVoltCellPackNo+" - "+l.value.MinVoltCellPosition},null,8,["label","value"])])]),a("div",ce,[s(i,{label:e(t)("battery.systemTempDifference"),value:l.value.SystemTempDifference+"",unit:"℃","enable-row":!0,"icon-type":e(u).systemTempDifference},null,8,["label","value","icon-type"]),de,a("div",me,[s(i,{class:"flex-1",label:e(t)("battery.maximumCellTemperature"),value:e(n).roundString(l.value.MaxCellTemp),unit:"℃"},null,8,["label","value"]),s(i,{class:"flex-1",label:e(t)("battery.packAndCellPosition"),value:l.value.MaxTempCellPackNo+" - "+l.value.MaxTempCellPosition},null,8,["label","value"]),s(i,{class:"flex-1",label:e(t)("battery.minimumCellTemperature"),value:e(n).roundString(l.value.MinCellTemp),unit:"℃"},null,8,["label","value"]),s(i,{class:"flex-1",label:e(t)("battery.packAndCellPosition"),value:l.value.MinTempCellPackNo+" - "+l.value.MinTempCellPosition},null,8,["label","value"])])]),a("div",ve,[s(i,{label:e(t)("battery.VoltCurrent"),"enable-row":!0,"icon-type":e(u).batteryInfo},null,8,["label","icon-type"]),pe,a("div",fe,[s(i,{class:"flex-1",label:e(t)("battery.voltage"),value:e(n).roundString(l.value.InsideAddedTotalVolt,1),unit:"V"},null,8,["label","value"]),s(i,{class:"flex-[3]",label:e(t)("battery.current"),value:e(n).roundString(l.value.CombinedCurrent,1),unit:"A"},null,8,["label","value"])])]),a("div",be,[s(i,{label:e(t)("battery.totalChargeAndDischarge"),"enable-row":!0,"icon-type":e(u).dischargeChargeAmount},null,8,["label","icon-type"]),ge,a("div",he,[s(i,{class:"flex-1",label:e(t)("battery.totalCharge"),"value-unit":e(n).kWhShortRoundString(l.value.AccumulatedChargeCapacity,2)},null,8,["label","value-unit"]),s(i,{class:"flex-[3]",label:e(t)("battery.totalDischarge"),"value-unit":e(n).kWhShortRoundString(l.value.CumulativeDischargeCapacity,2)},null,8,["label","value-unit"])])]),a("div",ye,[a("div",_e,[a("div",null,h(e(t)("cluster.detail.batteryCurve")),1),a("div",Ce,[s(M,{width:"251px","default-date":k.value,onOnChange:b[1]||(b[1]=c=>{k.value=c})},null,8,["default-date"])])]),a("div",xe,[s(X,{height:"244px",day:k.value,sn:`${e(d)}`,cn:`${e(p)}`},null,8,["day","sn","cn"])])]),s(te,{"module-name":"cluster",data:l.value,class:"mt-[8px]"},null,8,["data"])]),a("div",Se,[a("div",ke,[a("div",we,[a("span",null,h(e(t)("cluster.detail.clusterWarnings")),1),Te,a("span",{style:$({color:C.value.length?"#e01f00":"#86909C"})},h(C.value.length),5),De]),C.value.length?Y("",!0):(g(),x("div",Ve,h(e(t)("cluster.detail.noWarnings")),1)),a("div",Pe,[(g(!0),x(j,null,E(C.value,(c,N)=>{var w;return g(),x("div",{key:N,class:F(c.showType=="warn"?"detail-content-right-message-panel-warning-item-warn":"detail-content-right-message-panel-warning-item-error")},[(g(),J(H(c.showType=="warn"?e(G):e(Q)),{width:"12px",height:"12px",class:"mt-[6px] ml-[8px]"})),a("span",null,h(e(t)(c.i18n1Key,(w=c.extra)==null?void 0:w.i18n1Options)),1)],2)}),128))])])])])]))}}),el=U(Ie,[["__scopeId","data-v-2d6f38ee"]]);export{el as default};
